<div class="container mt-3">
  <form #form="ngForm" (ngSubmit)="onContinuar(form)" novalidate>
    @for (mod of modificacionesSeleccionadas; track mod; let i = $index) {
    <div>
      <!-- COCHES -->
      <!-- Homologado en emplazamiento no homologado -->
      @if ( mod.nombre === 'REMOLQUE HOMOLOGADO EN EMPLAZAMIENTO NO HOMOLOGADO'
      && mod.seleccionado ) {
      <div class="mb-3">
        <h3>Homologado en Emplazamiento No Homologado</h3>
        <div class="mb-2">
          <label>Tipo de acción:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.accion"
            name="accion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.accion === undefined"
          >
            <option value="Instalacion">Instalación</option>
            <option value="Sustitucion">Sustitución</option>
            <option value="Desmontaje">Desmontaje</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marca"
            name="marcaHomologado{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marca"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Tipo:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.tipo"
            name="tipoHomologado{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.tipo"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Clase:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.clase"
            name="claseHomologado{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.clase"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Contraseña de homologación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.homologacion"
            name="homologacion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.homologacion"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">MMR eje central:</label>
          <input
            type="number"
            min="0"
            min="0"
            class="form-control"
            [(ngModel)]="mod.mmrEjeCentral"
            name="mmrEjeCentral{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.mmrEjeCentral"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">MMR barra de tracción:</label>
          <input
            type="number"
            min="0"
            min="0"
            class="form-control"
            [(ngModel)]="mod.mmrBarraTraccion"
            name="mmrBarraTraccion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.mmrBarraTraccion"
          />
        </div>
        <div class="mb-2">
          <label class="form-label"
            >Selecciona valor de la metrica de los tornillos:</label
          >
          <select
            class="form-select"
            [(ngModel)]="mod.metrica"
            name="metrica{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.metrica == null"
          >
            <option [value]="null" disabled selected>Seleccione...</option>
            @for (num of metricasTornillos; track num) {
            <option [value]="num">
              {{ num }}
            </option>
            }
          </select>
        </div>
        <label class="form-label">Nº de tornillos:</label>
        <input
          type="number"
          min="0"
          class="form-control"
          [(ngModel)]="mod.nTornillos"
          name="nTornillos"
          required
          [class.is-invalid]="formSubmitted && !mod.nTornillos"
        />
      </div>
      }
      <!-- Homologado en emplazamiento también homologado -->
      @if ( mod.nombre === 'REMOLQUE HOMOLOGADO EN EMPLAZAMIENTO TAMBIÉN
      HOMOLOGADO' && mod.seleccionado ) {
      <div class="mb-3">
        <h3>Homologado en Emplazamiento También Homologado</h3>
        <div class="mb-2">
          <label>Tipo de acción:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.accion"
            name="accion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.accion === undefined"
          >
            <option value="Instalacion">Instalación</option>
            <option value="Sustitucion">Sustitución</option>
            <option value="Desmontaje">Desmontaje</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">Marca de la barra:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaBarra"
            name="marcaBarra{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaBarra"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Tipo de la barra:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.tipoBarra"
            name="tipoBarra{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.tipoBarra"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Clase de la barra:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.claseBarra"
            name="claseBarra{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.claseBarra"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Contraseña homologación barra:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.homologacionBarra"
            name="homologacionBarra{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.homologacionBarra"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Marca de la bola:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaBola"
            name="marcaBola{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaBola"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Clase de la bola:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.claseBola"
            name="claseBola{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.claseBola"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Contraseña homologación bola:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.homologacionBola"
            name="homologacionBola{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.homologacionBola"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">MMR eje central:</label>
          <input
            type="number"
            min="0"
            min="0"
            class="form-control"
            [(ngModel)]="mod.mmrEjeCentral"
            name="mmrEjeCentral2_{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.mmrEjeCentral"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">MMR barra de tracción:</label>
          <input
            type="number"
            min="0"
            min="0"
            class="form-control"
            [(ngModel)]="mod.mmrBarraTraccion"
            name="mmrBarraTraccion2_{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.mmrBarraTraccion"
          />
        </div>
      </div>
      }
      <!-- Reducción de plazas -->
      @if (mod.nombre === 'REDUCCIÓN DE PLAZAS' && mod.seleccionado) {
      <div class="mb-3">
        <h3>Reducción de Plazas</h3>
        <div class="mb-2">
          <label class="form-label">Enclaje de la plaza:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.enclaje"
            name="enclajePlaza{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.enclaje"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Número de plazas antes:</label>
          <input
            type="number"
            min="0"
            min="0"
            class="form-control"
            [(ngModel)]="mod.plazasAntes"
            name="plazasAntes{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.plazasAntes"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Plazas después de la reforma:</label>
          <input
            type="number"
            min="0"
            min="0"
            class="form-control"
            [(ngModel)]="mod.plazasDespues"
            name="plazasDespues{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.plazasDespues"
          />
        </div>
      </div>
      }
      <!-- NEUMÁTICOS -->
      @if (mod.nombre === 'NEUMÁTICOS' && mod.seleccionado) {
      <div class="mb-3">
        <h3>Neumáticos</h3>
        <div class="mb-2">
          <label class="form-label">Medida de las llantas:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.medidas"
            name="medidasNeumaticos{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.medidas"
          />
        </div>
        <!-- Campos adicionales solo si anotacion está presente y es "2" -->
        @if (mod.anotacion2) {
        <div class="mt-3">
          <div class="mb-2">
            <label class="form-label">Velocidad máxima del vehiculo:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.velocidadMaximaAntes"
              name="velMaxAntes{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.velocidadMaximaAntes"
            />
          </div>
          <div class="mb-2">
            <label class="form-label"
              >Velocidad máxima de los nuemáticos instalados:</label
            >
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.velocidadMaximaDespues"
              name="velMaxDespues{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.velocidadMaximaDespues"
            />
          </div>
        </div>
        }
      </div>
      }
      <!-- ALETINES Y SOBREALETINES -->
      @if (mod.nombre === 'ALETINES Y SOBREALETINES' && mod.seleccionado) {
      <div class="mb-3">
        <h3>Aletines y Sobrealetines</h3>
        <!-- Aletines -->
        @if (mod.detalle?.aletines) {
        <div>
          <h4>Aletines</h4>
          <div class="mb-2">
            <label>Tipo de acción:</label>
            <select
              class="form-select"
              [(ngModel)]="mod.accion"
              name="accion{{ i }}"
              required
              [class.is-invalid]="formSubmitted && mod.accion === undefined"
            >
              <option value="Instalacion">Instalación</option>
              <option value="Sustitucion">Sustitución</option>
              <option value="Desmontaje">Desmontaje</option>
            </select>
          </div>
          <div class="mb-2">
            <label class="form-label">Marca:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.marcaAletines"
              name="marcaAletines{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.marcaAletines"
            />
          </div>
          <div class="mb-2">
            <label class="form-label">Referencia:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.referenciaAletines"
              name="referenciaAletines{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.referenciaAletines"
            />
          </div>
          <div class="mb-2">
            <label class="form-label">Ancho (mm):</label>
            <input
              type="number"
              min="0"
              min="0"
              class="form-control"
              [(ngModel)]="mod.anchoAletines"
              name="anchoAletines{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.anchoAletines"
            />
          </div>
          <div class="mb-2">
            <label class="form-label">Ratio de curvatura mínimo:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.curvaturaAletines"
              name="curvaturaAletines{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.curvaturaAletines"
            />
          </div>
          <div class="mb-2">
            <label class="form-label"
              >Selecciona valor de la metrica de los tornillos:</label
            >
            <select
              class="form-select"
              [(ngModel)]="mod.metricaAletines"
              name="metricaAletines{{ i }}"
              required
              [class.is-invalid]="formSubmitted && mod.metricaAletines == null"
            >
              <option [value]="null" disabled selected>Seleccione...</option>
              @for (num of metricasTornillos; track num) {
              <option [value]="num">
                {{ num }}
              </option>
              }
            </select>
          </div>
        </div>
        }
        <!-- Sobrealetines -->
        @if (mod.detalle?.sobrealetines) {
        <div>
          <h4>Sobrealetines</h4>
          <div class="mb-2">
            <label>Tipo de acción:</label>
            <select
              class="form-select"
              [(ngModel)]="mod.accionSobreletines"
              name="accionSobreletines{{ i }}"
              required
              [class.is-invalid]="formSubmitted && mod.accion === undefined"
            >
              <option value="Instalacion">Instalación</option>
              <option value="Sustitucion">Sustitución</option>
              <option value="Desmontaje">Desmontaje</option>
            </select>
          </div>
          <div class="mb-2">
            <label class="form-label">Marca:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.marcaSobreletines"
              name="marcaSobreletines{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.marcaSobreletines"
            />
          </div>
          <div class="mb-2">
            <label class="form-label">Referencia:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.referenciaSobreletines"
              name="referenciaSobreletines{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.referenciaSobreletines"
            />
          </div>
          <div class="mb-2">
            <label class="form-label">Ancho (mm):</label>
            <input
              type="number"
              min="0"
              min="0"
              class="form-control"
              [(ngModel)]="mod.anchoSobrealetines"
              name="anchoSobrealetines{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.anchoSobrealetines"
            />
          </div>
          <div class="mb-2">
            <label class="form-label">Ratio de curvatura mínimo:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.curvaturaSobrealetines"
              name="curvaturaSobrealetines{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.curvaturaSobrealetines"
            />
          </div>
        </div>
        <div class="mb-2">
          <label class="form-label"
            >Selecciona valor de la metrica de los tornillos:</label
          >
          <select
            class="form-select"
            [(ngModel)]="mod.metricaSobrealetines"
            name="metricaSobrealetines{{ i }}"
            required
            [class.is-invalid]="
              formSubmitted && mod.metricaSobrealetines == null
            "
          >
            <option [value]="null" disabled selected>Seleccione...</option>
            @for (num of metricasTornillos; track num) {
            <option [value]="num">
              {{ num }}
            </option>
            }
          </select>
        </div>
        <label class="form-label">Nº de tornillos:</label>
        <input
          type="number"
          min="0"
          class="form-control"
          [(ngModel)]="mod.nTornillos"
          name="nTornillos"
          required
          [class.is-invalid]="formSubmitted && !mod.nTornillos"
        />
        }
      </div>
      }
      <!-- SEPARADORES DE RUEDA -->
      @if (mod.nombre === 'SEPARADORES DE RUEDA' && mod.seleccionado) {
      <div class="mb-3">
        <h3>Separadores de Rueda</h3>
        <div class="mb-2">
          <label>Tipo de acción:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.accion"
            name="accion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.accion === undefined"
          >
            <option value="Instalacion">Instalación</option>
            <option value="Sustitucion">Sustitución</option>
            <option value="Desmontaje">Desmontaje</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaSeparadores"
            name="marcaSeparadores{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaSeparadores"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Referencia:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.referenciaSeparadores"
            name="referenciaSeparadores{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.referenciaSeparadores"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Grosor:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.grosorSeparadores"
            name="grosorSeparadores{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.grosorSeparadores"
          />
        </div>
      </div>
      }
      <!-- SNORKEL -->
      @if (mod.nombre === 'SNORKEL' && mod.seleccionado) {
      <div class="mb-3">
        <h3>Snorkel</h3>
        <div class="mb-2">
          <label>Tipo de acción:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.accion"
            name="accion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.accion === undefined"
          >
            <option value="Instalacion">Instalación</option>
            <option value="Sustitucion">Sustitución</option>
            <option value="Desmontaje">Desmontaje</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">Material:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.materialSnorkel"
            name="materialSnorkel{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.materialSnorkel"
          >
            <option value="" disabled selected>Seleccione una opción</option>
            <option value="goma">Goma</option>
            <option value="plástico ABS">Plástico ABS</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaSnorkel"
            name="marcaSnorkel{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaSnorkel"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Medidas (mm):</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.medidasSnorkel"
            name="medidasSnorkel{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.medidasSnorkel"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Ratio de curvatura mínimo:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.curvaturaSnorkel"
            name="curvaturaSnorkel{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.curvaturaSnorkel"
          />
        </div>
        <div class="mb-2">
          <label class="form-label"
            >Selecciona valor de la metrica de los tornillos:</label
          >
          <select
            class="form-select"
            [(ngModel)]="mod.metrica"
            name="metrica{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.metrica == null"
          >
            <option [value]="null" disabled selected>Seleccione...</option>
            @for (num of metricasTornillos; track num) {
            <option [value]="num">
              {{ num }}
            </option>
            }
          </select>
        </div>
        <label class="form-label">Nº de tornillos:</label>
        <input
          type="number"
          min="0"
          class="form-control"
          [(ngModel)]="mod.nTornillos"
          name="nTornillos"
          required
          [class.is-invalid]="formSubmitted && !mod.nTornillos"
        />
      </div>
      }
      <!-- PARAGOLPES DELANTERO -->
      @if (mod.nombre === 'PARAGOLPES DELANTERO' && mod.seleccionado) {
      <div class="mb-3">
        <h3>Paragolpes Delantero</h3>
        <div class="mb-2">
          <label>Tipo de acción:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.accion"
            name="accion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.accion === undefined"
          >
            <option value="Instalacion">Instalación</option>
            <option value="Sustitucion">Sustitución</option>
            <option value="Desmontaje">Desmontaje</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">Tipo de fabricación:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.tipoFabricacionParagolpesDelantero"
            name="tipoFabricacionParagolpesDelantero{{ i }}"
            required
            [class.is-invalid]="
              formSubmitted && !mod.tipoFabricacionParagolpesDelantero
            "
          >
            <option value="" disabled selected>Seleccione una opción</option>
            <option value="comercial">Marca y Referencia</option>
            <option value="artesanal">
              Fabricado en acero de forma artesanal
            </option>
          </select>
        </div>
        <!-- Solo mostrar marca y referencia si la opción es 'comercial' -->
        @if (mod.tipoFabricacionParagolpesDelantero === 'comercial') {
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaParagolpes"
            name="marcaParagolpes{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaParagolpes"
          />
        </div>
        } @if (mod.tipoFabricacionParagolpesDelantero === 'comercial') {
        <div class="mb-2">
          <label class="form-label">Referencia:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.referenciaParagolpes"
            name="referenciaParagolpes{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.referenciaParagolpes"
          />
        </div>
        }
        <div class="mb-2">
          <label class="form-label">Medidas (mm):</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.medidasParagolpesDelantero"
            name="medidasParagolpesDelantero{{ i }}"
            required
            [class.is-invalid]="
              formSubmitted && !mod.medidasParagolpesDelantero
            "
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Ratio de curvatura mínimo:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.curvaturaParagolpesDelantero"
            name="curvaturaParagolpesDelantero{{ i }}"
            required
            [class.is-invalid]="
              formSubmitted && !mod.curvaturaParagolpesDelantero
            "
          />
        </div>
        <div class="mb-2">
          <label class="form-label"
            >Selecciona valor de la metrica de los tornillos:</label
          >
          <select
            class="form-select"
            [(ngModel)]="mod.metrica"
            name="metrica{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.metrica == null"
          >
            <option [value]="null" disabled selected>Seleccione...</option>
            @for (num of metricasTornillos; track num) {
            <option [value]="num">
              {{ num }}
            </option>
            }
          </select>
        </div>
        <label class="form-label">Nº de tornillos:</label>
        <input
          type="number"
          min="0"
          class="form-control"
          [(ngModel)]="mod.nTornillos"
          name="nTornillos"
          required
          [class.is-invalid]="formSubmitted && !mod.nTornillos"
        />
      </div>
      }
      <!-- PARAGOLPES TRASERO -->
      @if (mod.nombre === 'PARAGOLPES TRASERO' && mod.seleccionado) {
      <div class="mb-3">
        <h3>Paragolpes Trasero</h3>
        <div class="mb-2">
          <label>Tipo de acción:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.accion"
            name="accion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.accion === undefined"
          >
            <option value="Instalacion">Instalación</option>
            <option value="Sustitucion">Sustitución</option>
            <option value="Desmontaje">Desmontaje</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">Tipo de fabricación:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.tipoFabricacionParagolpesTrasero"
            name="tipoFabricacionParagolpesTrasero{{ i }}"
            required
            [class.is-invalid]="
              formSubmitted && !mod.tipoFabricacionParagolpesTrasero
            "
          >
            <option value="" disabled selected>Seleccione una opción</option>
            <option value="comercial">Marca y Referencia</option>
            <option value="artesanal">
              Fabricado en acero de forma artesanal
            </option>
          </select>
        </div>
        <!-- Solo mostrar marca y referencia si la opción es 'comercial' -->
        @if (mod.tipoFabricacionParagolpesTrasero === 'comercial') {
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaParagolpesTrasero"
            name="marcaParagolpesTrasero{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaParagolpesTrasero"
          />
        </div>
        } @if (mod.tipoFabricacionParagolpesTrasero === 'comercial') {
        <div class="mb-2">
          <label class="form-label">Referencia:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.referenciaParagolpesTrasero"
            name="referenciaParagolpesTrasero{{ i }}"
            required
            [class.is-invalid]="
              formSubmitted && !mod.referenciaParagolpesTrasero
            "
          />
        </div>
        }
        <div class="mb-2">
          <label class="form-label">Medidas (mm):</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.medidasParagolpesTrasero"
            name="medidasParagolpesTrasero{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.medidasParagolpesTrasero"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Ratio de curvatura mínimo:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.curvaturaParagolpesTrasero"
            name="curvaturaParagolpesTrasero{{ i }}"
            required
            [class.is-invalid]="
              formSubmitted && !mod.curvaturaParagolpesTrasero
            "
          />
        </div>
        <div class="mb-2">
          <label class="form-label"
            >Selecciona valor de la metrica de los tornillos:</label
          >
          <select
            class="form-select"
            [(ngModel)]="mod.metrica"
            name="metrica{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.metrica == null"
          >
            <option [value]="null" disabled selected>Seleccione...</option>
            @for (num of metricasTornillos; track num) {
            <option [value]="num">
              {{ num }}
            </option>
            }
          </select>
        </div>
        <label class="form-label">Nº de tornillos:</label>
        <input
          type="number"
          min="0"
          class="form-control"
          [(ngModel)]="mod.nTornillos"
          name="nTornillos"
          required
          [class.is-invalid]="formSubmitted && !mod.nTornillos"
        />
      </div>
      }
      <!-- CABRESTANTE -->
      @if (mod.nombre === 'CABRESTANTE' && mod.seleccionado) {
      <div class="mb-3">
        <h3>Cabrestante</h3>
        <div class="mb-2">
          <label>Tipo de acción:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.accion"
            name="accion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.accion === undefined"
          >
            <option value="Instalacion">Instalación</option>
            <option value="Sustitucion">Sustitución</option>
            <option value="Desmontaje">Desmontaje</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaCabrestante"
            name="marcaCabrestante{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaCabrestante"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Capacidad de arrastre (LB):</label>
          <input
            type="number"
            min="0"
            min="0"
            class="form-control"
            [(ngModel)]="mod.capacidadCabrestanteLb"
            name="capacidadCabrestanteLb{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.capacidadCabrestanteLb"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Capacidad de arrastre (kg):</label>
          <input
            type="number"
            min="0"
            min="0"
            class="form-control"
            [(ngModel)]="mod.capacidadCabrestanteKg"
            name="capacidadCabrestanteKg{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.capacidadCabrestanteKg"
          />
        </div>
        <div class="mb-2">
          <label class="form-label"
            >Selecciona valor de la metrica de los tornillos:</label
          >
          <select
            class="form-select"
            [(ngModel)]="mod.metrica"
            name="metrica{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.metrica == null"
          >
            <option [value]="null" disabled selected>Seleccione...</option>
            @for (num of metricasTornillos; track num) {
            <option [value]="num">
              {{ num }}
            </option>
            }
          </select>
        </div>
        <label class="form-label">Nº de tornillos:</label>
        <input
          type="number"
          min="0"
          class="form-control"
          [(ngModel)]="mod.nTornillos"
          name="nTornillos"
          required
          [class.is-invalid]="formSubmitted && !mod.nTornillos"
        />
      </div>
      }
      <!-- ANTIEMPOTRAMIENTO -->
      @if (mod.nombre === 'ANTIEMPOTRAMIENTO' && mod.seleccionado) {
      <div class="mb-3">
        <h3>Antiempotramiento</h3>
        <div class="mb-2">
          <label>Tipo de acción:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.accion"
            name="accion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.accion === undefined"
          >
            <option value="Instalacion">Instalación</option>
            <option value="Sustitucion">Sustitución</option>
            <option value="Desmontaje">Desmontaje</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">Medidas (mm):</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.medidasAntiempotramiento"
            name="medidasAntiempotramiento{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.medidasAntiempotramiento"
          />
        </div>
        <div class="mb-2">
          <label class="form-label"
            >Selecciona valor de la metrica de los tornillos:</label
          >
          <select
            class="form-select"
            [(ngModel)]="mod.metrica"
            name="metrica{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.metrica == null"
          >
            <option [value]="null" disabled selected>Seleccione...</option>
            @for (num of metricasTornillos; track num) {
            <option [value]="num">
              {{ num }}
            </option>
            }
          </select>
        </div>
        <label class="form-label">Nº de tornillos:</label>
        <input
          type="number"
          min="0"
          class="form-control"
          [(ngModel)]="mod.nTornillos"
          name="nTornillos"
          required
          [class.is-invalid]="formSubmitted && !mod.nTornillos"
        />
      </div>
      }
      <!-- SOPORTES PARA LUCES DE USO ESPECÍFICO -->
      @if ( mod.nombre === 'SOPORTES PARA LUCES DE USO ESPECÍFICO' &&
      mod.seleccionado ) {
      <div class="mb-3">
        <h3>Soportes para luces de uso específico</h3>
        <div class="mb-2">
          <label>Tipo de acción:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.accion"
            name="accion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.accion === undefined"
          >
            <option value="Instalacion">Instalación</option>
            <option value="Sustitucion">Sustitución</option>
            <option value="Desmontaje">Desmontaje</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">Ubicación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.ubicacionLucesEspecificas"
            name="ubicacionLucesEspecificas{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.ubicacionLucesEspecificas"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Medidas (ej: XXX x XXX mm):</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.medidasLucesEspecificas"
            name="medidasLucesEspecificas{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.medidasLucesEspecificas"
          />
        </div>
        <div class="mb-2">
          <label class="form-label"
            >Selecciona valor de la metrica de los tornillos:</label
          >
          <select
            class="form-select"
            [(ngModel)]="mod.metrica"
            name="metrica{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.metrica == null"
          >
            <option [value]="null" disabled selected>Seleccione...</option>
            @for (num of metricasTornillos; track num) {
            <option [value]="num">
              {{ num }}
            </option>
            }
          </select>
        </div>
        <label class="form-label">Nº de tornillos:</label>
        <input
          type="number"
          min="0"
          class="form-control"
          [(ngModel)]="mod.nTornillos"
          name="nTornillos"
          required
          [class.is-invalid]="formSubmitted && !mod.nTornillos"
        />
      </div>
      }
      <!-- SOPORTE PARA RUEDA DE REPUESTO -->
      @if ( mod.nombre === 'SOPORTE PARA RUEDA DE REPUESTO' && mod.seleccionado
      ) {
      <div class="mb-3">
        <h3>Soporte para rueda de repuesto</h3>
        <div class="mb-2">
          <label>Tipo de acción:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.accion"
            name="accion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.accion === undefined"
          >
            <option value="Instalacion">Instalación</option>
            <option value="Sustitucion">Sustitución</option>
            <option value="Desmontaje">Desmontaje</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">Tipo de fabricación:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.tipoFabricacionRuedaRepuesto"
            name="tipoFabricacionRuedaRepuesto{{ i }}"
            required
            [class.is-invalid]="
              formSubmitted && !mod.tipoFabricacionRuedaRepuesto
            "
          >
            <option value="" disabled selected>Seleccione una opción</option>
            <option value="comercial">Marca y Referencia</option>
            <option value="artesanal">
              Fabricado en acero de forma artesanal
            </option>
          </select>
        </div>
        @if (mod.tipoFabricacionRuedaRepuesto === 'comercial') {
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaRuedaRepuesto"
            name="marcaRuedaRepuesto{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaRuedaRepuesto"
          />
        </div>
        } @if (mod.tipoFabricacionRuedaRepuesto === 'comercial') {
        <div class="mb-2">
          <label class="form-label">Referencia:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.referenciaRuedaRepuesto"
            name="referenciaRuedaRepuesto{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.referenciaRuedaRepuesto"
          />
        </div>
        }
        <div class="mb-2">
          <label class="form-label">Medidas (ej: XXX x XXX mm):</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.medidasRuedaRepuesto"
            name="medidasRuedaRepuesto{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.medidasRuedaRepuesto"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Ratio de curvatura mínimo:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.curvaturaSoporteRuedaRepuesto"
            name="curvaturaSoporteRuedaRepuesto{{ i }}"
            required
            [class.is-invalid]="
              formSubmitted && !mod.curvaturaSoporteRuedaRepuesto
            "
          />
        </div>
        <div class="mb-2">
          <label class="form-label"
            >Selecciona valor de la metrica de los tornillos:</label
          >
          <select
            class="form-select"
            [(ngModel)]="mod.metrica"
            name="metrica{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.metrica == null"
          >
            <option [value]="null" disabled selected>Seleccione...</option>
            @for (num of metricasTornillos; track num) {
            <option [value]="num">
              {{ num }}
            </option>
            }
          </select>
        </div>
        <label class="form-label">Nº de tornillos:</label>
        <input
          type="number"
          min="0"
          class="form-control"
          [(ngModel)]="mod.nTornillos"
          name="nTornillos"
          required
          [class.is-invalid]="formSubmitted && !mod.nTornillos"
        />
      </div>
      }
      <!-- MUELLES, BALLESTAS Y AMORTIGUADORES -->
      @if ( mod.nombre === 'TODA LA CASUÍSTICA DE MUELLES, BALLESTAS Y ' +
      'AMORTIGUADORES QUE SE PUEDEN DAR' && mod.seleccionado ) {
      <div class="mb-3">
        <h3>Casuística de Muelles, Ballestas y Amortiguadores</h3>
        <!-- Muelle delantero con referencia -->
        @if (mod.detallesMuelles?.muelleDelanteroConRef) {
        <div>
          <h4>Muelle Delantero con Referencia</h4>
          <div class="mb-2">
            <label class="form-label">Marca:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.marcaMuelleDelanteroConRef"
              name="marcaMuelleDelanteroConRef{{ i }}"
              required
              [class.is-invalid]="
                formSubmitted && !mod.marcaMuelleDelanteroConRef
              "
            />
          </div>
          <div class="mb-2">
            <label class="form-label">Referencia:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.referenciaMuelleDelanteroConRef"
              name="referenciaMuelleDelanteroConRef{{ i }}"
              required
              [class.is-invalid]="
                formSubmitted && !mod.referenciaMuelleDelanteroConRef
              "
            />
          </div>
        </div>
        }
        <!-- Muelle delantero sin referencia -->
        @if (mod.detallesMuelles?.muelleDelanteroSinRef) {
        <div>
          <h4>Muelle Delantero sin Referencia</h4>
          <div class="mb-2">
            <label class="form-label">Marca:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.marcaMuelleDelanteroSinRef"
              name="{{ 'marcaMuelleDelanteroSinRef' + i }}"
              required
              [class.is-invalid]="
                formSubmitted && !mod.marcaMuelleDelanteroSinRef
              "
            />
          </div>
          <div class="mb-2">
            <label class="form-label">Diámetro exterior (mm):</label>
            <input
              type="number"
              min="0"
              min="0"
              class="form-control"
              [(ngModel)]="mod.diametroExteriorDelantero"
              name="diametroExteriorDelantero{{ i }}"
              required
              [class.is-invalid]="
                formSubmitted && !mod.diametroExteriorDelantero
              "
            />
          </div>
          <div class="mb-2">
            <label class="form-label">Longitud (mm):</label>
            <input
              type="number"
              min="0"
              min="0"
              class="form-control"
              [(ngModel)]="mod.longitudDelantero"
              name="longitudDelantero{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.longitudDelantero"
            />
          </div>
          <div class="mb-2">
            <label class="form-label">Diámetro de espira (mm):</label>
            <input
              type="number"
              min="0"
              min="0"
              class="form-control"
              [(ngModel)]="mod.diametroEspiraDelantero"
              name="diametroEspiraDelantero{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.diametroEspiraDelantero"
            />
          </div>
          <div class="mb-2">
            <label class="form-label">Número de espiras:</label>
            <input
              type="number"
              min="0"
              min="0"
              class="form-control"
              [(ngModel)]="mod.numeroEspirasDelantero"
              name="numeroEspirasDelantero{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.numeroEspirasDelantero"
            />
          </div>
        </div>
        }
        <!-- Ballesta delantera -->
        @if (mod.detallesMuelles?.ballestaDelantera) {
        <div>
          <h4>Ballesta Delantera</h4>
          <div class="mb-2">
            <label class="form-label">Marca:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.marcaBallestaDelantera"
              name="marcaBallestaDelantera{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.marcaBallestaDelantera"
            />
          </div>
          <div class="mb-2">
            <label class="form-label">Referencia:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.referenciaBallestaDelantera"
              name="referenciaBallestaDelantera{{ i }}"
              required
              [class.is-invalid]="
                formSubmitted && !mod.referenciaBallestaDelantera
              "
            />
          </div>
        </div>
        }
        <!-- Ballesta trasera -->
        @if (mod.detallesMuelles?.ballestaTrasera) {
        <div>
          <h4>Ballesta Trasera</h4>
          <div class="mb-2">
            <label class="form-label">Marca:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.marcaBallestaTrasera"
              name="marcaBallestaTrasera{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.marcaBallestaTrasera"
            />
          </div>
          <div class="mb-2">
            <label class="form-label">Referencia:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.referenciaBallestaTrasera"
              name="referenciaBallestaTrasera{{ i }}"
              required
              [class.is-invalid]="
                formSubmitted && !mod.referenciaBallestaTrasera
              "
            />
          </div>
        </div>
        }
        <!-- Amortiguador delantero -->
        @if (mod.detallesMuelles?.amortiguadorDelantero) {
        <div>
          <h4>Amortiguador Delantero</h4>
          <div class="mb-2">
            <label class="form-label">Marca:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.marcaAmortiguadorDelantero"
              name="marcaAmortiguadorDelantero{{ i }}"
              required
              [class.is-invalid]="
                formSubmitted && !mod.marcaAmortiguadorDelantero
              "
            />
          </div>
          <div class="mb-2">
            <label class="form-label">Referencia:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.referenciaAmortiguadorDelantero"
              name="referenciaAmortiguadorDelantero{{ i }}"
              required
              [class.is-invalid]="
                formSubmitted && !mod.referenciaAmortiguadorDelantero
              "
            />
          </div>
        </div>
        }
        <!-- Amortiguador trasero -->
        @if (mod.detallesMuelles?.amortiguadorTrasero) {
        <div>
          <h4>Amortiguador Trasero</h4>
          <div class="mb-2">
            <label class="form-label">Marca:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.marcaAmortiguadorTrasero"
              name="marcaAmortiguadorTrasero{{ i }}"
              required
              [class.is-invalid]="
                formSubmitted && !mod.marcaAmortiguadorTrasero
              "
            />
          </div>
          <div class="mb-2">
            <label class="form-label">Referencia:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.referenciaAmortiguadorTrasero"
              name="referenciaAmortiguadorTrasero{{ i }}"
              required
              [class.is-invalid]="
                formSubmitted && !mod.referenciaAmortiguadorTrasero
              "
            />
          </div>
        </div>
        }
        <!-- Tacos de goma -->
        @if (mod.detallesMuelles?.tacosDeGoma) {
        <div>
          <h4>Instalación de Tacos de Goma</h4>
          <div class="form-check">
            <input
              type="checkbox"
              class="form-check-input"
              id="tacosDelantero{{ i }}"
              [(ngModel)]="datosEntrada.tacosDelantero"
              name="tacosDelantero{{ i }}"
            />
            <label class="form-check-label" for="tacosDelantero{{ i }}">
              Tacos delanteros
            </label>
          </div>
          <div class="form-check">
            <input
              type="checkbox"
              class="form-check-input"
              id="tacosTrasero{{ i }}"
              [(ngModel)]="datosEntrada.tacosTrasero"
              name="tacosTrasero{{ i }}"
            />
            <label class="form-check-label" for="tacosTrasero{{ i }}">
              Tacos traseros
            </label>
            @if ( formSubmitted && !datosEntrada.tacosTrasero &&
            !datosEntrada.tacosDelantero ) {
            <div class="invalid-feedback d-block">
              Debe seleccionar al menos una opción.
            </div>
            }
          </div>
          @if (datosEntrada?.tacosDelantero) {
          <div class="mb-2">
            <label class="form-label">Diámetro del eje delantero:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.diametroTacoDelantero"
              name="diametroTacoDelantero{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.diametroTacoDelantero"
            />
          </div>
          } @if (datosEntrada?.tacosDelantero) {
          <div class="mb-2">
            <label class="form-label">Espesor del eje delantero:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.espesorTacoDelantero"
              name="espesorTacoDelantero{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.espesorTacoDelantero"
            />
          </div>
          } @if (datosEntrada?.tacosTrasero) {
          <div class="mb-2">
            <label class="form-label">Diámetro del eje trasero:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.diametroTacoTrasero"
              name="diametroTacoTrasero{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.diametroTacoTrasero"
            />
          </div>
          } @if (datosEntrada?.tacosTrasero) {
          <div class="mb-2">
            <label class="form-label">Espesor del eje trasero:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.espesorTacoTrasero"
              name="espesorTacoTrasero{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.espesorTacoTrasero"
            />
          </div>
          }
        </div>
        }
        <!-- Kit de elevación -->
        @if (mod.detallesMuelles?.kitElevacion) {
        <div>
          <h4>Kit de Elevación</h4>
          <div class="form-check">
            <input
              type="checkbox"
              class="form-check-input"
              id="kitElevacionDelantero{{ i }}"
              [(ngModel)]="mod.detallesMuelles.kitElevacionDelantero"
              name="kitElevacionDelantero{{ i }}"
            />
            <label class="form-check-label" for="kitElevacionDelantero{{ i }}">
              Muelles delanteros
            </label>
          </div>
          <div class="form-check">
            <input
              type="checkbox"
              class="form-check-input"
              id="kitElevacionTrasero{{ i }}"
              [(ngModel)]="mod.detallesMuelles.kitElevacionTrasero"
              name="kitElevacionTrasero{{ i }}"
            />
            <label class="form-check-label" for="kitElevacionTrasero{{ i }}">
              Ballestas traseras
            </label>
          </div>
          @if ( formSubmitted && !mod.detallesMuelles.kitElevacionDelantero &&
          !mod.detallesMuelles.kitElevacionTrasero ) {
          <div class="invalid-feedback d-block">
            Debe seleccionar al menos una opción.
          </div>
          }
          <!-- SOLO SI: muelles delanteros -->
          @if (mod.detallesMuelles.kitElevacionDelantero) {
          <div>
            <h4 class="mt-3">Eje Delantero</h4>
            <div class="mb-2">
              <label class="form-label">Marca:</label>
              <input
                type="text"
                class="form-control"
                [(ngModel)]="mod.marcaKitElevacionDelantera"
                name="marcaKitElevacion{{ i }}"
                required
              />
            </div>
            <div class="mb-2">
              <label class="form-label">Tipo de suspensión:</label>
              <select
                class="form-select"
                [(ngModel)]="mod.tipoSuspensionDelantera"
                name="tipoSuspensionDelantera{{ i }}"
                required
                [class.is-invalid]="
                  formSubmitted && !mod.tipoSuspensionDelantera
                "
              >
                <option value="" disabled selected>
                  Seleccione una opción
                </option>
                <option value="muelles">Muelles</option>
                <option value="ballestas">Ballestas</option>
              </select>
            </div>
            <div class="mb-2">
              <label class="form-label">Tipo de taco:</label>
              <select
                class="form-select"
                [(ngModel)]="mod.tipoTacoDelantero"
                name="tipoTacoDelantero{{ i }}"
                required
                [class.is-invalid]="formSubmitted && !mod.tipoTacoDelantero"
              >
                <option value="" disabled selected>
                  Seleccione una opción
                </option>
                <option value="circular">Circular</option>
                <option value="rectangular">Rectangular</option>
              </select>
            </div>
            <div class="mb-2">
              <label class="form-label">Diámetro (mm):</label>
              <input
                type="number"
                min="0"
                min="0"
                class="form-control"
                [(ngModel)]="mod.diametroTacoDelantero"
                name="diametroTacoDelantero{{ i }}"
                required
                [class.is-invalid]="formSubmitted && !mod.diametroTacoDelantero"
              />
            </div>
            <div class="mb-2">
              <label class="form-label">Espesor (mm):</label>
              <input
                type="number"
                min="0"
                min="0"
                class="form-control"
                [(ngModel)]="mod.espesorTacoDelantero"
                name="espesorTacoDelantero{{ i }}"
                required
                [class.is-invalid]="formSubmitted && !mod.espesorTacoDelantero"
              />
            </div>
          </div>
          }
          <!-- SOLO SI: ballestas traseras -->
          @if (mod.detallesMuelles.kitElevacionTrasero) {
          <div>
            <h4 class="mt-3">Eje Trasero</h4>
            <div class="mb-2">
              <label class="form-label">Marca:</label>
              <input
                type="text"
                class="form-control"
                [(ngModel)]="mod.marcaKitElevacionTrasera"
                name="marcaKitElevacion{{ i }}"
                required
              />
            </div>
            <div class="mb-2">
              <label class="form-label">Tipo de suspensión:</label>
              <select
                class="form-select"
                [(ngModel)]="mod.tipoSuspensionTrasera"
                name="tipoSuspensionTrasera{{ i }}"
                required
                [class.is-invalid]="formSubmitted && !mod.tipoSuspensionTrasera"
              >
                <option value="" disabled selected>
                  Seleccione una opción
                </option>
                <option value="muelles">Muelles</option>
                <option value="ballestas">Ballestas</option>
              </select>
            </div>
            <div class="mb-2">
              <label class="form-label">Tipo de taco:</label>
              <select
                class="form-select"
                [(ngModel)]="mod.tipoTacoTrasero"
                name="tipoTacoTrasero{{ i }}"
                required
                [class.is-invalid]="formSubmitted && !mod.tipoTacoTrasero"
              >
                <option value="" disabled selected>
                  Seleccione una opción
                </option>
                <option value="circular">Circular</option>
                <option value="rectangular">Rectangular</option>
              </select>
            </div>
            <div class="mb-2">
              <label class="form-label">Diámetro (mm):</label>
              <input
                type="number"
                min="0"
                min="0"
                class="form-control"
                [(ngModel)]="mod.diametroTacoTrasero"
                name="diametroTacoTrasero{{ i }}"
                required
                [class.is-invalid]="formSubmitted && !mod.diametroTacoTrasero"
              />
            </div>
            <div class="mb-2">
              <label class="form-label">Espesor (mm):</label>
              <input
                type="number"
                min="0"
                min="0"
                class="form-control"
                [(ngModel)]="mod.espesorTacoTrasero"
                name="espesorTacoTrasero{{ i }}"
                required
                [class.is-invalid]="formSubmitted && !mod.espesorTacoTrasero"
              />
            </div>
          </div>
          }
        </div>
        }
      </div>
      }
      <!-- Matrícula y Portamatrícula -->
      @if (mod.nombre === 'MATRÍCULA Y PORTAMATRÍCULA' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Matrícula y Portamatrícula</h3>
        <div class="mb-2">
          <label>Tipo de acción:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.accion"
            name="accion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.accion === undefined"
          >
            <option value="Instalacion">Instalación</option>
            <option value="Sustitucion">Sustitución</option>
            <option value="Desmontaje">Desmontaje</option>
          </select>
        </div>
        <!-- OPCIÓN 1 -->
        <h4 class="mt-3">Instalación</h4>
        @if (mod.detalle.instalacionPorta) {
        <div>
          <div class="mb-2">
            <label>Ubicación del portamatrícula:</label>
            <select
              class="form-select"
              [(ngModel)]="mod.ubicacionPorta1"
              name="ubicacionPorta1{{ i }}"
              required
              [class.is-invalid]="
                formSubmitted && mod.ubicacionPorta1 === undefined
              "
            >
              <option value="" disabled selected>Seleccione...</option>
              <option value="trasero">Trasero</option>
              <option value="delantero">Delantero</option>
            </select>
          </div>
          <div class="mb-2">
            <label>Lado:</label>
            <select
              [(ngModel)]="mod.ladoPorta1"
              name="ladoPorta1{{ i }}"
              class="form-select"
              required
              [class.is-invalid]="formSubmitted && mod.ladoPorta1 === undefined"
            >
              <option value="" disabled selected>Seleccione...</option>
              <option value="derecho">Derecho</option>
              <option value="izquierdo">Izquierdo</option>
              <option value="centro">Centro</option>
            </select>
          </div>
          <div class="mb-2">
            <label>Material:</label>
            <select
              [(ngModel)]="mod.materialPorta1"
              name="materialPorta1{{ i }}"
              class="form-select"
              required
              [class.is-invalid]="
                formSubmitted && mod.materialPorta1 === undefined
              "
            >
              <option value="" disabled selected>Seleccione...</option>
              <option value="acero">Acero</option>
              <option value="plástico">Plástico</option>
            </select>
          </div>
          <div class="mb-2">
            <label>Fabricación:</label>
            <select
              [(ngModel)]="mod.fabricacionPorta1"
              name="fabricacionPorta1{{ i }}"
              class="form-select"
              required
              [class.is-invalid]="
                formSubmitted && mod.fabricacionPorta1 === undefined
              "
            >
              <option value="" disabled selected>Seleccione...</option>
              <option value="artesanal">Artesanal</option>
              <option value="comprado">Comprado</option>
            </select>
          </div>
          @if (mod.fabricacionPorta1 === 'comprado') {
          <div class="mb-2">
            <label>Marca:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.marcaPorta1"
              name="marcaPorta1{{ i }}"
              required
              [class.is-invalid]="
                formSubmitted && mod.marcaPorta1 === undefined
              "
            />
          </div>
          } @if (mod.fabricacionPorta1 === 'comprado') {
          <div class="mb-2">
            <label>Referencia:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.referenciaPorta1"
              name="referenciaPorta1{{ i }}"
              required
              [class.is-invalid]="
                formSubmitted && mod.referenciaPorta1 === undefined
              "
            />
          </div>
          }
        </div>
        }
        <!-- OPCIÓN 2 -->
        <h4 class="mt-3">Reubicación</h4>
        @if (mod.detalle.reubicacionTrasera) {
        <div>
          <div class="mb-2">
            <label>Portamatrícula:</label>
            <select
              [(ngModel)]="mod.portamatr2"
              name="portamatr2{{ i }}"
              class="form-select"
              required
              [class.is-invalid]="formSubmitted && mod.portamatr2 === undefined"
            >
              <option value="" disabled selected>Seleccione...</option>
              <option value="delantero">Delantero</option>
              <option value="trasero">Trasero</option>
            </select>
          </div>
          <div class="form-check mt-2">
            <input
              type="checkbox"
              class="form-check-input"
              [(ngModel)]="mod.paragolpesNuevo2"
              name="paragolpesNuevo2{{ i }}"
              required
              [class.is-invalid]="
                formSubmitted && mod.paragolpesNuevo2 === undefined
              "
            />
            <label class="form-check-label">¿Es nuevo paragolpes?</label>
          </div>
        </div>
        }
        <!-- OPCIÓN 3 -->
        <h4 class="mt-3">Cambio de ubicación</h4>
        @if (mod.detalle.cambioUbicacionDelantera) {
        <div>
          <div class="mb-2">
            <label>Matrícula:</label>
            <select
              [(ngModel)]="mod.ubicacionMat3"
              name="ubicacionMat3{{ i }}"
              class="form-select"
              required
              [class.is-invalid]="
                formSubmitted && mod.ubicacionMat3 === undefined
              "
            >
              <option value="" disabled selected>Seleccione...</option>
              <option value="delantera">Delantera</option>
              <option value="trasera">Trasera</option>
            </select>
          </div>
          <div class="mb-2">
            <label>Material:</label>
            <select
              [(ngModel)]="mod.materialMat3"
              name="materialMat3{{ i }}"
              class="form-select"
              required
              [class.is-invalid]="
                formSubmitted && mod.materialMat3 === undefined
              "
            >
              <option value="" disabled selected>Seleccione...</option>
              <option value="Acrílica">Acrílica</option>
              <option value="Metálica">Metálica</option>
            </select>
          </div>
          <div class="mb-2">
            <label>Medidas:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.medidasMat3"
              name="medidasMat3{{ i }}"
              required
              [class.is-invalid]="
                formSubmitted && mod.medidasMat3 === undefined
              "
            />
          </div>
          <div class="mb-2">
            <label>Ubicación en paragolpes:</label>
            <select
              [(ngModel)]="mod.ubicacionBumper3"
              name="ubicacionBumper3{{ i }}"
              class="form-select"
              required
              [class.is-invalid]="
                formSubmitted && mod.ubicacionBumper3 === undefined
              "
            >
              <option value="" disabled selected>Seleccione...</option>
              <option value="derecho">Derecho</option>
              <option value="izquierdo">Izquierdo</option>
              <option value="centro">Centro</option>
            </select>
          </div>
          <div class="form-check mt-2">
            <input
              type="checkbox"
              class="form-check-input"
              [(ngModel)]="mod.paragolpesNuevo3"
              name="paragolpesNuevo3{{ i }}"
              required
              [class.is-invalid]="
                formSubmitted && mod.paragolpesNuevo3 === undefined
              "
            />
            <label class="form-check-label">¿Es nuevo paragolpes?</label>
          </div>
        </div>
        }
      </div>
      }
      <!-- Defensa Delantera -->
      @if (mod.nombre === 'DEFENSA DELANTERA' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Defensa Delantera</h3>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaDefensa"
            name="marcaDefensa{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaDefensa"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Modelo:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.modeloDefensa"
            name="modeloDefensa{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.modeloDefensa"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Grosor del tubo (mm):</label>
          <input
            type="number"
            min="0"
            min="0"
            class="form-control"
            [(ngModel)]="mod.grosorTuboDefensa"
            name="grosorTuboDefensa{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.grosorTuboDefensa"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Medidas (ej: XXX x XXX mm):</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.medidasDefensa"
            name="medidasDefensa{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.medidasDefensa"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Ratio de curvatura mínimo:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.curvaturaDefensaDelantera"
            name="curvaturaDefensaDelantera{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.curvaturaDefensaDelantera"
          />
        </div>
        <div class="mb-2">
          <label class="form-label"
            >Selecciona valor de la metrica de los tornillos:</label
          >
          <select
            class="form-select"
            [(ngModel)]="mod.metrica"
            name="metrica{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.metrica == null"
          >
            <option [value]="null" disabled selected>Seleccione...</option>
            @for (num of metricasTornillos; track num) {
            <option [value]="num">
              {{ num }}
            </option>
            }
          </select>
        </div>
        <label class="form-label">Nº de tornillos:</label>
        <input
          type="number"
          min="0"
          class="form-control"
          [(ngModel)]="mod.nTornillos"
          name="nTornillos"
          required
          [class.is-invalid]="formSubmitted && !mod.nTornillos"
        />
      </div>
      }
      <!-- Amortiguador de Dirección -->
      @if (mod.nombre === 'AMORTIGUADOR DE DIRECCIÓN' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Amortiguador de Dirección</h3>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaAmortiguador"
            name="marcaAmortiguador{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaAmortiguador"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Referencia:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.referenciaAmortiguador"
            name="referenciaAmortiguador{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.referenciaAmortiguador"
          />
        </div>
      </div>
      }
      <!-- Barra de Dirección -->
      @if (mod.nombre === 'BARRA DE DIRECCIÓN' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Barra de Dirección</h3>
        <div class="mb-2">
          <label>Tipo de acción:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.accion"
            name="accion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.accion === undefined"
          >
            <option value="Instalacion">Instalación</option>
            <option value="Sustitucion">Sustitución</option>
            <option value="Desmontaje">Desmontaje</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaBarraDireccion"
            name="marcaBarraDireccion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaBarraDireccion"
          />
        </div>
      </div>
      }
      <!-- Barra para Regular la Convergencia (simple) -->
      @if ( mod.nombre === 'BARRA PARA REGULAR LA CONVERGENCIA DE LAS RUEDAS
      (alineamiento)' && mod.seleccionado && !mod.regulable ) {
      <div class="mb-4">
        <h3>Barra para Regular la Convergencia</h3>
        <div class="mb-2">
          <label>Tipo de acción:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.accion"
            name="accion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.accion === undefined"
          >
            <option value="Instalacion">Instalación</option>
            <option value="Sustitucion">Sustitución</option>
            <option value="Desmontaje">Desmontaje</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaConvergencia"
            name="marcaConvergencia{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaConvergencia"
          />
        </div>
      </div>
      }
      <!-- Barra para Regular la Convergencia (regulable) -->
      @if ( mod.nombre === 'BARRA PARA REGULAR LA CONVERGENCIA DE LAS RUEDAS
      (movimiento lateral)' && mod.seleccionado ) {
      <div class="mb-4">
        <h3>Barra para Regular la Convergencia (Regulable o No)</h3>
        <div class="mb-2">
          <label>Tipo de acción:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.accion"
            name="accion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.accion === undefined"
          >
            <option value="Instalacion">Instalación</option>
            <option value="Sustitucion">Sustitución</option>
            <option value="Desmontaje">Desmontaje</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaConvergenciaReg"
            name="marcaConvergenciaReg{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaConvergenciaReg"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">¿Es regulable?:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.regulable"
            name="regulable{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.regulable === undefined"
          >
            <option value="" disabled selected>Seleccione una opción</option>
            <option [ngValue]="true">Sí</option>
            <option [ngValue]="false">No</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">Referencia:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.referenciaConvergenciaReg"
            name="referenciaConvergenciaReg{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.referenciaConvergenciaReg"
          />
        </div>
      </div>
      }
      <!-- FAROS DELANTEROS PRINCIPALES -->
      @if ( mod.nombre === 'FAROS DELANTEROS PRINCIPALES' && mod.seleccionado )
      {
      <div class="mb-4">
        <h3>Faros Delanteros Principales</h3>
        <div class="mb-2">
          <label class="form-label">¿Es LED?</label>
          <select
            class="form-select"
            [(ngModel)]="mod.esLed"
            name="esLedFaro{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.esLed === undefined"
          >
            <option value="" disabled selected>Seleccione una opción</option>
            <option [ngValue]="true">Sí</option>
            <option [ngValue]="false">No</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marca"
            name="marcaFaro{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marca"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Contraseña de homologación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.homologacion"
            name="homologacionFaro{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.homologacion"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Marcado luz de posición:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcadoPosicion"
            name="marcadoPosicionFaro{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcadoPosicion"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Marcado luz de cruce/carretera:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcadoCruce"
            name="marcadoCruceFaro{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcadoCruce"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Índice de referencia (pdl/ud):</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.pdlFaro"
            name="pdlFaro{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.pdlFaro"
          />
        </div>
      </div>
      }
      <!-- LUZ DE CRUCE -->
      @if (mod.nombre === 'LUZ DE CRUCE' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Luz de Cruce</h3>
        <div class="mb-2">
          <label class="form-label">Marcaje:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaje"
            name="marcajeCruce{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaje"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Contraseña de homologación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.homologacion"
            name="homologacionCruce{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.homologacion"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Índice de referencia (pdl/ud):</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.pdlFaroCruce"
            name="pdlFaroCruce{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.pdlFaroCruce"
          />
        </div>
        <div class="mb-2">
          <label class="form-label"
            >¿La luz de carretera queda desactivada?</label
          >
          <select
            class="form-select"
            [(ngModel)]="mod.carreteraDesactivada"
            name="carreteraDesactivada{{ i }}"
            required
            [class.is-invalid]="
              formSubmitted && mod.carreteraDesactivada === undefined
            "
          >
            <option value="" disabled selected>Seleccione una opción</option>
            <option [ngValue]="true">Sí</option>
            <option [ngValue]="false">No</option>
          </select>
        </div>
      </div>
      }
      <!-- LUCES DE LARGO ALCANCE -->
      @if (mod.nombre === 'LUCES DE LARGO ALCANCE' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Luces de Largo Alcance</h3>
        <div class="mb-2">
          <label>Tipo de acción:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.accion"
            name="accion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.accion === undefined"
          >
            <option value="Instalacion">Instalación</option>
            <option value="Sustitucion">Sustitución</option>
            <option value="Desmontaje">Desmontaje</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marca"
            name="marcaLargoAlcance{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marca"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Referencia:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.referencia"
            name="referenciaLargoAlcance{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.referencia"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Marcaje:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaje"
            name="marcajeLargoAlcance{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaje"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Contraseña de homologación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.homologacion"
            name="homologacionLargoAlcance{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.homologacion"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Índice de referencia (pdl/ud):</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.indiceReferencia"
            name="indiceLargoAlcance{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.indiceReferencia"
          />
        </div>
      </div>
      }
      <!-- LUZ DE POSICIÓN -->
      @if (mod.nombre === 'LUZ DE POSICIÓN' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Luz de Posición</h3>
        <div class="mb-2">
          <label>Tipo de acción:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.accion"
            name="accion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.accion === undefined"
          >
            <option value="Instalacion">Instalación</option>
            <option value="Sustitucion">Sustitución</option>
            <option value="Desmontaje">Desmontaje</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">¿Es LED?</label>
          <select
            class="form-select"
            [(ngModel)]="mod.esLedPosicion"
            name="esLedPosicion{{ i }}"
            required
            [class.is-invalid]="
              formSubmitted && mod.esLedPosicion === undefined
            "
          >
            <option value="" disabled selected>Seleccione una opción</option>
            <option [ngValue]="true">Sí</option>
            <option [ngValue]="false">No</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaPosicion"
            name="marcaPosicion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaPosicion"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Marcaje:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcajePosicion"
            name="marcajePosicion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcajePosicion"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Contraseña de homologación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.homologacionPosicion"
            name="homologacionPosicion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.homologacionPosicion"
          />
        </div>
      </div>
      }
      <!-- 3ª LUZ DE FRENO -->
      @if (mod.nombre === '3ª LUZ DE FRENO' && mod.seleccionado) {
      <div class="mb-4">
        <h3>3ª Luz de Freno</h3>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marca3Freno"
            name="marca3Freno{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marca"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Marcaje:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaje3Freno"
            name="marcaje3Freno{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaje3Freno"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Contraseña de homologación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.homologacion3Freno"
            name="homologacion3Freno{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.homologacion3Freno"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Donde está situado?</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.situado3Freno"
            name="situado3Freno{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.situado3Freno"
          />
        </div>
      </div>
      }
      <!-- DIURNAS -->
      @if (mod.nombre === 'DIURNAS' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Luces Diurnas</h3>
        <div class="mb-2">
          <label>Tipo de acción:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.accion"
            name="accion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.accion === undefined"
          >
            <option value="Instalacion">Instalación</option>
            <option value="Sustitucion">Sustitución</option>
            <option value="Desmontaje">Desmontaje</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">¿Es LED?</label>
          <select
            class="form-select"
            [(ngModel)]="mod.esLed"
            name="esLedFaro{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.esLed === undefined"
          >
            <option value="" disabled selected>Seleccione una opción</option>
            <option [ngValue]="true">Sí</option>
            <option [ngValue]="false">No</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaDiurnas"
            name="marcaDiurnas{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaDiurnas"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Contraseña de homologación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.homologacionDiurnas"
            name="homologacionDiurnas{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.homologacionDiurnas"
          />
        </div>
      </div>
      }
      <!-- ANTINIEBLA -->
      @if (mod.nombre === 'ANTINIEBLA' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Luces Antiniebla</h3>
        <div class="mb-2">
          <label>Tipo de acción:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.accion"
            name="accion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.accion === undefined"
          >
            <option value="Instalacion">Instalación</option>
            <option value="Sustitucion">Sustitución</option>
            <option value="Desmontaje">Desmontaje</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaAntiniebla"
            name="marcaAntiniebla{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaAntiniebla"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Contraseña de homologación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.homologacionAntiniebla"
            name="homologacionAntiniebla{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.homologacionAntiniebla"
          />
        </div>
        <div class="mb-2">
          <label class="form-label"
            >Selecciona valor de la metrica de los tornillos:</label
          >
          <select
            class="form-select"
            [(ngModel)]="mod.metrica"
            name="metrica{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.metrica == null"
          >
            <option [value]="null" disabled selected>Seleccione...</option>
            @for (num of metricasTornillos; track num) {
            <option [value]="num">
              {{ num }}
            </option>
            }
          </select>
        </div>
        <label class="form-label">Nº de tornillos:</label>
        <input
          type="number"
          min="0"
          class="form-control"
          [(ngModel)]="mod.nTornillos"
          name="nTornillos"
          required
          [class.is-invalid]="formSubmitted && !mod.nTornillos"
        />
      </div>
      }
      <!-- PILOTO TRASERO -->
      @if (mod.nombre === 'PILOTO TRASERO' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Piloto Trasero</h3>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaPilotoTrasero"
            name="marcaPilotoTrasero{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaPilotoTrasero"
          />
        </div>
        @if (mod.detalle.luzPosicionFreno) {
        <div class="mb-2">
          <label class="form-label">Referencia posición/freno:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.referenciaLuzPosicionFreno"
            name="referenciaLuzPosicionFreno{{ i }}"
            required
            [class.is-invalid]="
              formSubmitted && !mod.referenciaLuzPosicionFreno
            "
          />
        </div>
        } @if (mod.detalle.intermitente) {
        <div class="mb-2">
          <label class="form-label">Referencia intermitente:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.referenciaIntermitente"
            name="referenciaIntermitente{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.referenciaIntermitente"
          />
        </div>
        } @if (mod.detalle.marchaAtras) {
        <div class="mb-2">
          <label class="form-label">Referencia marcha atrás:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.referenciaMarchaAtras"
            name="referenciaMarchaAtras{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.referenciaMarchaAtras"
          />
        </div>
        } @if (mod.detalle.catadioptrico) {
        <div class="mb-2">
          <label class="form-label">Referencia catadióptrico:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.referenciaCatadioptrico"
            name="referenciaCatadioptrico{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.referenciaCatadioptrico"
          />
        </div>
        }
      </div>
      }
      <!-- INTERMITENTES -->
      @if (mod.nombre === 'INTERMITENTES' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Intermitentes</h3>
        <div class="mb-2">
          <label>Tipo de acción:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.accion"
            name="accion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.accion === undefined"
          >
            <option value="Instalacion">Instalación</option>
            <option value="Sustitucion">Sustitución</option>
            <option value="Desmontaje">Desmontaje</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">Marcaje:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcajeIntermitentes"
            name="marcajeIntermitentes{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcajeIntermitentes"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Contraseña de homologación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.homologacionIntermitentes"
            name="homologacionIntermitentes{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.homologacionIntermitentes"
          />
        </div>
      </div>
      }
      <!-- SUSTITUCIÓN DE EJES -->
      @if (mod.nombre === 'SUSTITUCIÓN DE EJES' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Sustitución de ejes</h3>
        <div class="mb-2">
          <label class="form-label">Marca procedente:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaEje"
            name="marcaEje{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaEje"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Denominación comercial procedente:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.denominacionEje"
            name="denominacionEje{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.denominacionEje"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Contraseña de homologación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.contrasenaHomologacionEje"
            name="contrasenaHomologacionEje{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.contrasenaHomologacionEje"
          />
        </div>
      </div>
      }
      <!-- ESTRIBOS LATERALES O TALONERAS -->
      @if ( mod.nombre === 'ESTRIBOS LATERALES O TALONERAS' && mod.seleccionado
      ) {
      <div class="mb-4">
        <h3>Estribos laterales o taloneras</h3>
        <div class="mb-2">
          <label>Tipo de acción:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.accion"
            name="accion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.accion === undefined"
          >
            <option value="Instalacion">Instalación</option>
            <option value="Sustitucion">Sustitución</option>
            <option value="Desmontaje">Desmontaje</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcataloneras"
            name="marcataloneras{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcataloneras"
          />
        </div>
        <div class="mb-2">
          <label>Material:</label>
          <select
            [(ngModel)]="mod.materialEstribos"
            name="materialEstribos{{ i }}"
            class="form-select"
            required
            [class.is-invalid]="formSubmitted && !mod.materialEstribos"
          >
            <option value="" disabled selected>Seleccione...</option>
            <option value="acero">Acero</option>
            <option value="plástico">Plástico</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label mt-2">Dimensiones (ej: 150x600mm):</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.dimensionesTaloneras"
            name="dimensionesTaloneras{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.dimensionesTaloneras"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Ratio de curvatura mínimo:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.curvaturaEstribosLaterales"
            name="curvaturaEstribosLaterales{{ i }}"
            required
            [class.is-invalid]="
              formSubmitted && !mod.curvaturaEstribosLaterales
            "
          />
        </div>
        <div class="mb-2">
          <label class="form-label"
            >Selecciona valor de la metrica de los tornillos:</label
          >
          <select
            class="form-select"
            [(ngModel)]="mod.metrica"
            name="metrica{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.metrica == null"
          >
            <option [value]="null" disabled selected>Seleccione...</option>
            @for (num of metricasTornillos; track num) {
            <option [value]="num">
              {{ num }}
            </option>
            }
          </select>
        </div>
        <label class="form-label">Nº de tornillos:</label>
        <input
          type="number"
          min="0"
          class="form-control"
          [(ngModel)]="mod.nTornillos"
          name="nTornillos"
          required
          [class.is-invalid]="formSubmitted && !mod.nTornillos"
        />
      </div>
      }
      <!-- MOTOS -->
      <!-- REDUCCIÓN MMA Y MMTA -->
      @if (mod.nombre === 'REDUCCIÓN MMA Y MMTA' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Reducción MMA y MMTA</h3>
        @if (mod.ejeDelantero) {
        <div>
          <h4>Reducción en eje delantero</h4>
          <label class="form-label">Kg totales:</label>
          <input
            type="number"
            min="0"
            min="0"
            class="form-control"
            [(ngModel)]="mod.kgReduccionEjeDelantero"
            name="kgReduccionEjeDelantero{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.kgReduccionEjeDelantero"
          />
        </div>
        } @if (mod.ejeTotal) {
        <div>
          <h4>Reducción total</h4>
          <label class="form-label">Kg totales:</label>
          <input
            type="number"
            min="0"
            min="0"
            class="form-control"
            [(ngModel)]="mod.kgReduccionTotal"
            name="kgReduccionTotal{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.kgReduccionTotal"
          />
        </div>
        }
      </div>
      }
      <!-- LLANTAS Y NEUMÁTICOS -->
      @if (mod.nombre === 'LLANTAS Y NEUMÁTICOS' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Llantas y Neumáticos</h3>
        <div class="mb-2">
          <label>Cual de los dos neumaticos?:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.neumaticosMoto"
            name="neumaticosMoto{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.neumaticosMoto"
          >
            <option value="delantero">Delantero</option>
            <option value="trasero">Trasero</option>
            <option value="delantero y trasero">Delantero y trasero</option>
          </select>
        </div>
        @if ( mod.neumaticosMoto === 'delantero' || mod.neumaticosMoto ===
        'delantero y trasero' ) {
        <div class="mb-2">
          <label class="form-label">Neumático delantero:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.neumaticoDelantero"
            name="neumaticoDelantero{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.neumaticoDelantero"
          />
        </div>
        } @if ( mod.neumaticosMoto === 'delantero' || mod.neumaticosMoto ===
        'delantero y trasero' ) {
        <div class="mb-2">
          <label class="form-label"
            >Medidas de llanta neumático delantero:</label
          >
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.medidasLlantaDelantero"
            name="medidasLlantaDelantero{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.medidasLlantaDelantero"
          />
        </div>
        } @if ( mod.neumaticosMoto === 'trasero' || mod.neumaticosMoto ===
        'delantero y trasero' ) {
        <div class="mb-2">
          <label class="form-label">Neumático trasero:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.neumaticoTrasero"
            name="neumaticoTrasero{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.neumaticoTrasero"
          />
        </div>
        } @if ( mod.neumaticosMoto === 'trasero' || mod.neumaticosMoto ===
        'delantero y trasero' ) {
        <div class="mb-2">
          <label class="form-label">Medidas de llanta neumático trasero:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.medidasLlantaTrasero"
            name="medidasLlantaTrasero{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.medidasLlantaTrasero"
          />
        </div>
        }
      </div>
      }
      <!-- SUSPENSIÓN -->
      @if ( mod.nombre === 'SUSPENSIÓN' && mod.seleccionado &&
      datosEntrada.tipoVehiculo === 'moto' ) {
      <div class="mb-4">
        <h3>Suspensión</h3>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marca"
            name="marcaSuspension{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marca"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Referencia:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.referencia"
            name="referenciaSuspension{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.referencia"
          />
        </div>
      </div>
      }
      <!-- SUSTITUCIÓN GUARDABARROS -->
      @if (mod.nombre === 'SUSTITUCIÓN GUARDABARROS' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Sustitución de Guardabarros</h3>
        @if (mod.guardabarrosDelantero) {
        <div>
          <h4>Guardabarros delantero</h4>
          <div class="mb-2">
            <label class="form-label">Tipo de fabricación:</label>
            <select
              class="form-select"
              [(ngModel)]="mod.tipoFabricacionGuardabarrosDelantero"
              name="tipoFabricacionGuardabarrosDelantero{{ i }}"
              required
              [class.is-invalid]="
                formSubmitted && !mod.tipoFabricacionGuardabarrosDelantero
              "
            >
              <option value="" disabled selected>Seleccione una opción</option>
              <option value="comercial">Marca y Referencia</option>
              <option value="artesanal">
                Fabricado en acero de forma artesanal
              </option>
            </select>
          </div>
          <!-- Solo mostrar marca y referencia si la opción es 'comercial' -->
          @if (mod.tipoFabricacionGuardabarrosDelantero === 'comercial') {
          <div class="mb-2">
            <label class="form-label">Marca:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.marcaDelantero"
              name="marcaDelantero{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.marcaDelantero"
            />
          </div>
          } @if (mod.tipoFabricacionGuardabarrosDelantero === 'comercial') {
          <div class="mb-2">
            <label class="form-label">Referencia:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.referenciaDelantero"
              name="referenciaDelantero{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.referenciaDelantero"
            />
          </div>
          }
          <label class="form-label mt-2">Dimensiones (ej: 150x600mm):</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.dimensionesDelantero"
            name="dimensionesDelantero{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.dimensionesDelantero"
          />
          <div class="mb-2">
            <label class="form-label"
              >Selecciona valor de la metrica de los tornillos:</label
            >
            <select
              class="form-select"
              [(ngModel)]="mod.metrica"
              name="metrica{{ i }}"
              required
              [class.is-invalid]="formSubmitted && mod.metrica == null"
            >
              <option [value]="null" disabled selected>Seleccione...</option>
              @for (num of metricasTornillos; track num) {
              <option [value]="num">
                {{ num }}
              </option>
              }
            </select>
          </div>
        </div>
        } @if (mod.guardabarrosTrasero) {
        <div>
          <h4>Guardabarros trasero</h4>
          <div class="mb-2">
            <label class="form-label">Tipo de fabricación:</label>
            <select
              class="form-select"
              [(ngModel)]="mod.tipoFabricacionGuardabarrosTrasero"
              name="tipoFabricacionGuardabarrosTrasero{{ i }}"
              required
              [class.is-invalid]="
                formSubmitted && !mod.tipoFabricacionGuardabarrosTrasero
              "
            >
              <option value="" disabled selected>Seleccione una opción</option>
              <option value="comercial">Marca y Referencia</option>
              <option value="artesanal">
                Fabricado en acero de forma artesanal
              </option>
            </select>
          </div>
          <!-- Solo mostrar marca y referencia si la opción es 'comercial' -->
          @if (mod.tipoFabricacionGuardabarrosTrasero === 'comercial') {
          <div class="mb-2">
            <label class="form-label">Marca:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.marcatRasero"
              name="marcatRasero{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.marcatRasero"
            />
          </div>
          } @if (mod.tipoFabricacionGuardabarrosTrasero === 'comercial') {
          <div class="mb-2">
            <label class="form-label">Referencia:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mod.referenciaTrasero"
              name="referenciaTrasero{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.referenciaTrasero"
            />
          </div>
          }
          <label class="form-label">Dimensiones (ej: 150x600mm):</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.dimensionesTrasero"
            name="dimensionesTrasero{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.dimensionesTrasero"
          />
          <div class="mb-2">
            <label class="form-label"
              >Selecciona valor de la metrica de los tornillos:</label
            >
            <select
              class="form-select"
              [(ngModel)]="mod.metrica"
              name="metrica{{ i }}"
              required
              [class.is-invalid]="formSubmitted && mod.metrica == null"
            >
              <option [value]="null" disabled selected>Seleccione...</option>
              @for (num of metricasTornillos; track num) {
              <option [value]="num">
                {{ num }}
              </option>
              }
            </select>
          </div>
        </div>
        }
      </div>
      }
      <!-- MANILLAR -->
      @if (mod.nombre === 'MANILLAR' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Manillar</h3>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marca"
            name="marcaManillar{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marca"
          />
          <label class="form-label mt-2">Modelo:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.modelo"
            name="modeloManillar{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.modelo"
          />
        </div>
        <div class="mb-2">
          <label class="form-label"
            >Selecciona valor de la metrica de los tornillos:</label
          >
          <select
            class="form-select"
            [(ngModel)]="mod.metrica"
            name="metrica{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.metrica == null"
          >
            <option [value]="null" disabled selected>Seleccione...</option>
            @for (num of metricasTornillos; track num) {
            <option [value]="num">
              {{ num }}
            </option>
            }
          </select>
        </div>
        <label class="form-label">Nº de tornillos:</label>
        <input
          type="number"
          min="0"
          class="form-control"
          [(ngModel)]="mod.nTornillos"
          name="nTornillos"
          required
          [class.is-invalid]="formSubmitted && !mod.nTornillos"
        />
      </div>
      }
      <!-- VELOCÍMETRO -->
      @if (mod.nombre === 'VELOCÍMETRO' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Velocímetro</h3>
        <label class="form-label">Marca:</label>
        <input
          type="text"
          class="form-control"
          [(ngModel)]="mod.marca"
          name="marcaVelocimetro{{ i }}"
          required
          [class.is-invalid]="formSubmitted && !mod.marca"
        />
        <label class="form-label mt-2">Referencia:</label>
        <input
          type="text"
          class="form-control"
          [(ngModel)]="mod.referencia"
          name="referenciaVelocimetro{{ i }}"
          required
          [class.is-invalid]="formSubmitted && !mod.referencia"
        />
        <label class="form-label mt-2">Contraseña de homologación:</label>
        <input
          type="text"
          class="form-control"
          [(ngModel)]="mod.homologacion"
          name="homologacionVelocimetro{{ i }}"
          required
          [class.is-invalid]="formSubmitted && !mod.homologacion"
        />
        <div class="mb-2">
          <label class="form-label"
            >Selecciona valor de la metrica de los tornillos:</label
          >
          <select
            class="form-select"
            [(ngModel)]="mod.metrica"
            name="metrica{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.metrica == null"
          >
            <option [value]="null" disabled selected>Seleccione...</option>
            @for (num of metricasTornillos; track num) {
            <option [value]="num">
              {{ num }}
            </option>
            }
          </select>
        </div>
        <label class="form-label">Nº de tornillos:</label>
        <input
          type="number"
          min="0"
          class="form-control"
          [(ngModel)]="mod.nTornillos"
          name="nTornillos"
          required
          [class.is-invalid]="formSubmitted && !mod.nTornillos"
        />
      </div>
      }
      <!-- LATIGUILLOS -->
      @if (mod.nombre === 'LATIGUILLOS' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Latiguillos</h3>
        <div class="mb-2">
          <label class="form-label">Marca delanteros:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaDelanteros"
            name="marcaDelanteros{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaDelanteros"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Referencia delanteros:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.referenciaDelanteros"
            name="referenciaDelanteros{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.referenciaDelanteros"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Marca traseros:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaTraseros"
            name="marcaTraseros{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaTraseros"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Referencia traseros:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.referenciaTraseros"
            name="referenciaTraseros{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.referenciaTraseros"
          />
        </div>
      </div>
      }
      <!-- RETROVISORES -->
      @if (mod.nombre === 'RETROVISORES' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Retrovisores</h3>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marca"
            name="marcaRetrovisores{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marca"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Modelo:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.modelo"
            name="modeloRetrovisores{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.modelo"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Marcaje:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaje"
            name="marcajeRetrovisores{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaje"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Contraseña de homologación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.homologacion"
            name="homologacionRetrovisores{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.homologacion"
          />
        </div>
      </div>
      }
      <!-- HORQUILLA DELANTERA -->
      @if (mod.nombre === 'HORQUILLA DELANTERA' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Horquilla Delantera</h3>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marca"
            name="marcaHorquilla{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marca"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Tipo:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.tipo"
            name="tipoHorquilla{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.tipo"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Variante:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.variante"
            name="varianteHorquilla{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.variante"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Denominación comercial:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.denominacion"
            name="denominacionHorquilla{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.denominacion"
          />
        </div>
      </div>
      }
      <!-- DISCO DE FRENO Y PINZA DE FRENO -->
      @if ( mod.nombre === 'DISCO DE FRENO Y PINZA DE FRENO' && mod.seleccionado
      ) {
      <div class="mb-4">
        <h3>Disco de Freno y Pinza de Freno</h3>
        <!-- Disco de freno -->
        <div class="mb-3">
          <label class="form-label fw-bold"
            >¿Qué componente de freno se ha modificado?</label
          >
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              [(ngModel)]="mod.tieneDisco"
              name="tieneDisco{{ i }}"
            />
            <label class="form-check-label">Disco de freno</label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              [(ngModel)]="mod.tienePastilla"
              name="tienePastilla{{ i }}"
            />
            <label class="form-check-label">Pinza de freno</label>
          </div>
          @if (formSubmitted && !mod.tieneDisco && !mod.tienePastilla) {
          <div class="text-danger mt-1">
            Debes seleccionar al menos una opción: disco o pastilla de freno.
          </div>
          }
        </div>
        <!-- Disco de freno -->
        @if (mod.tieneDisco) {
        <div>
          <h4>Disco de Freno</h4>
          <label class="form-label">¿Qué frenos se han modificado?</label>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              [(ngModel)]="mod.discoDelantero"
              name="discoDelantero{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.discoDelantero"
            />
            <label class="form-check-label">Delantero</label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              [(ngModel)]="mod.discoTrasero"
              name="discoTrasero{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.discoTrasero"
            />
            <label class="form-check-label">Trasero</label>
          </div>
          <!-- Campos Disco Delantero -->
          @if (mod.discoDelantero) {
          <div class="mt-2">
            <label class="form-label">Marca freno delantero:</label>
            <input
              class="form-control"
              type="text"
              [(ngModel)]="mod.marcaDiscoDelantero"
              name="marcaDiscoDelantero{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.marcaDiscoDelantero"
            />
            <label class="form-label mt-2">Referencia freno delantero:</label>
            <input
              class="form-control"
              type="text"
              [(ngModel)]="mod.referenciaDiscoDelantero"
              name="referenciaDiscoDelantero{{ i }}"
              required
              [class.is-invalid]="
                formSubmitted && !mod.referenciaDiscoDelantero
              "
            />
            <div class="mb-2">
              <label class="form-label"
                >Selecciona valor de la metrica de los tornillos:</label
              >
              <select
                class="form-select"
                [(ngModel)]="mod.metrica"
                name="metrica{{ i }}"
                required
                [class.is-invalid]="formSubmitted && mod.metrica == null"
              >
                <option [value]="null" disabled selected>Seleccione...</option>
                @for (num of metricasTornillos; track num) {
                <option [value]="num">
                  {{ num }}
                </option>
                }
              </select>
            </div>
          </div>
          }
          <!-- Campos Disco Trasero -->
          @if (mod.discoTrasero) {
          <div class="mt-2">
            <label class="form-label">Marca freno trasero:</label>
            <input
              class="form-control"
              type="text"
              [(ngModel)]="mod.marcaDiscoTrasero"
              name="marcaDiscoTrasero{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.marcaDiscoTrasero"
            />
            <label class="form-label mt-2">Referencia freno trasero:</label>
            <input
              class="form-control"
              type="text"
              [(ngModel)]="mod.referenciaDiscoTrasero"
              name="referenciaDiscoTrasero{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.referenciaDiscoTrasero"
            />
            <div class="mb-2">
              <label class="form-label"
                >Selecciona valor de la metrica de los tornillos:</label
              >
              <select
                class="form-select"
                [(ngModel)]="mod.metrica"
                name="metrica{{ i }}"
                required
                [class.is-invalid]="formSubmitted && mod.metrica == null"
              >
                <option [value]="null" disabled selected>Seleccione...</option>
                @for (num of metricasTornillos; track num) {
                <option [value]="num">
                  {{ num }}
                </option>
                }
              </select>
            </div>
          </div>
          }
        </div>
        }
        <!-- Pastilla de freno -->
        @if (mod.tienePastilla) {
        <div class="mt-4">
          <h4>Pinza de Freno</h4>
          <label class="form-label">¿Qué frenos se han modificado?</label>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              [(ngModel)]="mod.pastillaDelantera"
              name="pastillaDelantera{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.pastillaDelantera"
            />
            <label class="form-check-label">Delantero</label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              [(ngModel)]="mod.pastillaTrasera"
              name="pastillaTrasera{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.pastillaTrasera"
            />
            <label class="form-check-label">Trasero</label>
          </div>
          <!-- Campos Pastilla Delantera -->
          @if (mod.pastillaDelantera) {
          <div class="mt-2">
            <label class="form-label">Marca pinza delantera:</label>
            <input
              class="form-control"
              type="text"
              [(ngModel)]="mod.marcaPastillaDelantera"
              name="marcaPastillaDelantera{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.marcaPastillaDelantera"
            />
            <label class="form-label mt-2">Referencia pinza delantera:</label>
            <input
              class="form-control"
              type="text"
              [(ngModel)]="mod.referenciaPastillaDelantera"
              name="referenciaPastillaDelantera{{ i }}"
              required
              [class.is-invalid]="
                formSubmitted && !mod.referenciaPastillaDelantera
              "
            />
            <div class="mb-2">
              <label class="form-label"
                >Selecciona valor de la metrica de los tornillos:</label
              >
              <select
                class="form-select"
                [(ngModel)]="mod.metrica"
                name="metrica{{ i }}"
                required
                [class.is-invalid]="formSubmitted && mod.metrica == null"
              >
                <option [value]="null" disabled selected>Seleccione...</option>
                @for (num of metricasTornillos; track num) {
                <option [value]="num">
                  {{ num }}
                </option>
                }
              </select>
            </div>
          </div>
          }
          <!-- Campos Pastilla Trasera -->
          @if (mod.pastillaTrasera) {
          <div class="mt-2">
            <label class="form-label">Marca pinza trasera:</label>
            <input
              class="form-control"
              type="text"
              [(ngModel)]="mod.marcaPastillaTrasera"
              name="marcaPastillaTrasera{{ i }}"
              required
              [class.is-invalid]="formSubmitted && !mod.marcaPastillaTrasera"
            />
            <label class="form-label mt-2">Referencia pinza trasera:</label>
            <input
              class="form-control"
              type="text"
              [(ngModel)]="mod.referenciaPastillaTrasera"
              name="referenciaPastillaTrasera{{ i }}"
              required
              [class.is-invalid]="
                formSubmitted && !mod.referenciaPastillaTrasera
              "
            />
            <div class="mb-2">
              <label class="form-label"
                >Selecciona valor de la metrica de los tornillos:</label
              >
              <select
                class="form-select"
                [(ngModel)]="mod.metrica"
                name="metrica{{ i }}"
                required
                [class.is-invalid]="formSubmitted && mod.metrica == null"
              >
                <option [value]="null" disabled selected>Seleccione...</option>
                @for (num of metricasTornillos; track num) {
                <option [value]="num">
                  {{ num }}
                </option>
                }
              </select>
            </div>
          </div>
          }
        </div>
        }
      </div>
      }
      <!-- LUCES -->
      @if (mod.nombre === 'LUCES' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Luces</h3>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marca"
            name="marca{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marca"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Modelo:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.modelo"
            name="modelo{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.modelo"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Referencia:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.referencia"
            name="referencia{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marca"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Marcajes:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcajes"
            name="marcajes{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcajes"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Contraseña de homologación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.homologacion"
            name="homologacion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.homologacion"
          />
        </div>
      </div>
      }
      <!-- CAMPERS -->
      <!-- CAMBIO DE CLASIFICACIÓN -->
      @if (mod.nombre === 'CAMBIO DE CLASIFICACIÓN' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Cambio de Clasificación</h3>
        <p>La clasificación antes y después ya ha sido recogida.</p>
      </div>
      }
      <!-- AUMENTO O DISMINUCIÓN DE PLAZAS -->
      @if ( mod.nombre === 'AUMENTO O DISMINUCIÓN DE PLAZAS' && mod.seleccionado
      ) {
      <div class="mb-4">
        <h3>Aumento o Disminución de Plazas</h3>
        <div class="mb-2">
          <label class="form-label">Tipo de cambio:</label>
          <select
            class="form-select"
            [(ngModel)]="mod.tipoCambio"
            name="tipoCambio{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.tipoCambio"
          >
            <option value="" disabled selected>Seleccione una opción</option>
            <option value="aumento">Aumento</option>
            <option value="disminucion">Disminución</option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label">Plazas antes de la reforma:</label>
          <input
            type="number"
            min="0"
            min="0"
            class="form-control"
            [(ngModel)]="mod.plazasAntes"
            name="plazasAntes{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.plazasAntes"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Plazas después de la reforma:</label>
          <input
            type="number"
            min="0"
            min="0"
            class="form-control"
            [(ngModel)]="mod.plazasDespues"
            name="plazasDespues{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.plazasDespues"
          />
        </div>
      </div>
      }
      <!-- SUSTITUCIÓN DE BANQUETA DE ASIENTOS POR ASIENTO INDIVIDUAL -->
      @if ( mod.nombre === 'SUSTITUCIÓN DE BANQUETA DE ASIENTOS POR ASIENTO
      INDIVIDUAL' && mod.seleccionado ) {
      <div class="mb-4">
        <h3>Sustitución de Banqueta por Asiento Individual</h3>
        <div class="mb-2">
          <label class="form-label">Marca del asiento:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaAsiento"
            name="marcaAsiento{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaAsiento"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Contraseña de homologación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.contrasenaAsiento"
            name="contrasenaAsiento{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.contrasenaAsiento"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Plazas de la variante:</label>
          <input
            type="number"
            min="0"
            min="0"
            class="form-control"
            [(ngModel)]="mod.plazasAsiento"
            name="plazasAsiento{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.plazasAsiento"
          />
        </div>
        <select
          class="form-select"
          [(ngModel)]="mod.posicionAsiento"
          name="posicionAsiento{{ i }}"
          required
          [class.is-invalid]="formSubmitted && !mod.posicionAsiento"
        >
          <option value="" disabled selected>Seleccione una opción</option>
          <option value="delanteras">Delanteras</option>
          <option value="traseras">Traseras</option>
        </select>
      </div>
      }
      <!-- INSTALACIÓN DE BASES GIRATORIAS -->
      @if ( mod.nombre === 'INSTALACIÓN DE BASES GIRATORIAS' && mod.seleccionado
      ) {
      <div class="mb-4">
        <h3>Instalación de Bases Giratorias</h3>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaBaseGiratoria"
            name="marcaBaseGiratoria{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaBaseGiratoria"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Referencia (conductor):</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.referenciaConductor"
            name="referenciaConductor{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.referenciaConductor"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Referencia (acompañante):</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.referenciaAcompanante"
            name="referenciaAcompanante{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.referenciaAcompanante"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Contraseña de homologación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.homologacionBase"
            name="homologacionBase{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.homologacionBase"
          />
        </div>
        <div class="mb-2">
          <label class="form-label"
            >Selecciona valor de la metrica de los tornillos:</label
          >
          <select
            class="form-select"
            [(ngModel)]="mod.metrica"
            name="metrica{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.metrica == null"
          >
            <option [value]="null" disabled selected>Seleccione...</option>
            @for (num of metricasTornillos; track num) {
            <option [value]="num">
              {{ num }}
            </option>
            }
          </select>
        </div>
        <label class="form-label">Nº de tornillos:</label>
        <input
          type="number"
          min="0"
          class="form-control"
          [(ngModel)]="mod.nTornillos"
          name="nTornillos"
          required
          [class.is-invalid]="formSubmitted && !mod.nTornillos"
        />
      </div>
      }
      <!-- CALEFACCIÓN ESTACIONARIA -->
      @if (mod.nombre === 'CALEFACCIÓN ESTACIONARIA' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Calefacción Estacionaria</h3>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaCalefaccion"
            name="marcaCalefaccion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaCalefaccion"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Modelo:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.modeloCalefaccion"
            name="modeloCalefaccion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.modeloCalefaccion"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Contraseña de homologación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.homologacionCalefaccion"
            name="homologacionCalefaccion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.homologacionCalefaccion"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Descripción:</label>
          <textarea
            class="form-control"
            rows="3"
            [(ngModel)]="mod.descripcionCalefaccion"
            name="descripcionCalefaccion{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.descripcionCalefaccion"
            placeholder="Ej: El calentador se sitúa en la parte delantera izquierda, a los pies de la banqueta doble de asientos, bajo el forrado, en el interior del vehículo y el escape se instala en los bajos del vehículo en la parte delantera del lado izquierdo. El mando de la calefacción se ha ubicado detrás de la banqueta de asientos dobles"
          ></textarea>
        </div>
      </div>
      }
      <!-- MOBILIARIO INTERIOR VEHÍCULO -->
      @if ( mod.nombre === 'MOBILIARIO INTERIOR VEHÍCULO' && mod.seleccionado )
      {
      <div class="mb-4">
        <h3>Mobiliario Interior Vehículo</h3>
        <!-- Mueble Bajo -->
        @if (mod.opcionesMueble?.muebleBajo) {
        <div>
          <h4>
            Mueble Bajo
            <button
              class="btn btn-success btn-sm ms-2"
              (click)="anadirMueble(mod, 'bajo')"
            >
              + Añadir
            </button>
            <button
              type="button"
              class="btn btn-outline-danger btn-sm ms-2"
              (click)="borrarUltimoMueble(mod, 'bajo')"
            >
              ↺ Borrar último
            </button>
          </h4>
          @for (mueble of mod.mueblesBajo; track mueble; let j = $index) {
          <div class="border rounded p-2 mb-2">
            <label class="form-label">Medidas:</label>
            <input
              type="text"
              class="form-control mb-2"
              [(ngModel)]="mueble.medidas"
              name="medidas{{ j }}"
            />
            <div class="mb-2">
              <label class="form-label">*Tipo de fabricación:</label>
              <select
                class="form-select"
                [(ngModel)]="mueble.tipoFabricacionMuebleBajo"
                name="tipoFabricacionMuebleBajo{{ i }}"
                required
              >
                <option value="" disabled selected>
                  Seleccione una opción
                </option>
                <option value="comercial">Marca y Referencia</option>
                <option value="aceroArtesanal">
                  Fabricado en acero de forma artesanal
                </option>
                <option value="maderaArtesanal">
                  Fabricado en madera de forma artesanal
                </option>
              </select>
            </div>
            <!-- Solo mostrar marca y referencia si la opción es 'comercial' -->
            @if (mueble.tipoFabricacionMuebleBajo === 'comercial') {
            <div class="mb-2">
              <label class="form-label">Marca:</label>
              <input
                type="text"
                class="form-control"
                [(ngModel)]="mueble.marcaMuebleBajo"
                name="marcaMuebleBajo{{ i }}"
                required
              />
            </div>
            } @if (mueble.tipoFabricacionMuebleBajo === 'comercial') {
            <div class="mb-2">
              <label class="form-label">Referencia:</label>
              <input
                type="text"
                class="form-control"
                [(ngModel)]="mueble.referenciaMuebleBajo"
                name="referenciaMuebleBajo{{ i }}"
                required
              />
            </div>
            }
          </div>
          }
        </div>
        }
        <!-- Mueble Alto -->
        @if (mod.opcionesMueble?.muebleAlto) {
        <div>
          <h4>
            Mueble Alto
            <button
              class="btn btn-success btn-sm ms-2"
              (click)="anadirMueble(mod, 'alto')"
            >
              + Añadir
            </button>
            <button
              type="button"
              class="btn btn-outline-danger btn-sm ms-2"
              (click)="borrarUltimoMueble(mod, 'alto')"
            >
              ↺ Borrar último
            </button>
          </h4>
          @for (mueble of mod.mueblesAlto; track mueble; let j = $index) {
          <div class="border rounded p-2 mb-2">
            <label class="form-label">Medidas:</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="mueble.medidas"
              name="medidas{{ j }}"
            />
            <div class="mb-2">
              <label class="form-label">*Tipo de fabricación:</label>
              <select
                class="form-select"
                [(ngModel)]="mueble.tipoFabricacionMuebleAlto"
                name="tipoFabricacionMuebleAlto{{ i }}"
                required
              >
                <option value="" disabled selected>
                  Seleccione una opción
                </option>
                <option value="comercial">Marca y Referencia</option>
                <option value="aceroArtesanal">
                  Fabricado en acero de forma artesanal
                </option>
                <option value="maderaArtesanal">
                  Fabricado en madera de forma artesanal
                </option>
              </select>
            </div>
            <!-- Solo mostrar marca y referencia si la opción es 'comercial' -->
            @if (mueble.tipoFabricacionMuebleAlto === 'comercial') {
            <div class="mb-2">
              <label class="form-label">Marca:</label>
              <input
                type="text"
                class="form-control"
                [(ngModel)]="mueble.marcaMuebleAlto"
                name="marcaMuebleAlto{{ i }}"
                required
                [class.is-invalid]="formSubmitted && !mueble.marcaMuebleAlto"
              />
            </div>
            } @if (mueble.tipoFabricacionMuebleAlto === 'comercial') {
            <div class="mb-2">
              <label class="form-label">Referencia:</label>
              <input
                type="text"
                class="form-control"
                [(ngModel)]="mueble.referenciaMuebleAlto"
                name="referenciaMuebleAlto{{ i }}"
                required
                [class.is-invalid]="
                  formSubmitted && !mueble.referenciaMuebleAlto
                "
              />
            </div>
            }
          </div>
          }
        </div>
        }
        <!-- Aseo -->
        @if (mod.opcionesMueble?.aseo) {
        <div>
          <h4>
            Aseo
            <button
              type="button"
              class="btn btn-success btn-sm ms-2"
              (click)="anadirMueble(mod, 'aseo')"
            >
              + Añadir
            </button>
            <button
              type="button"
              class="btn btn-outline-danger btn-sm ms-2"
              (click)="borrarUltimoMueble(mod, 'aseo')"
            >
              ↺ Borrar último
            </button>
          </h4>
          @for (aseo of mod.mueblesAseo; track aseo; let j = $index) {
          <div class="border rounded p-2 mb-2">
            <label class="form-label">Medidas:</label>
            <input
              type="text"
              class="form-control mb-2"
              [(ngModel)]="aseo.medidas"
              name="medidasAseo{{ j }}"
              required
            />
            <label class="form-label">Descripción del interior:</label>
            <textarea
              class="form-control"
              rows="3"
              [(ngModel)]="aseo.descripcion"
              name="descripcionAseo{{ j }}"
              required
            ></textarea>
          </div>
          }
        </div>
        }
      </div>
      }
      <!-- CLARABOYA -->
      @if (mod.nombre === 'CLARABOYA' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Claraboya</h3>
        <div class="mb-2">
          <label class="form-label">Cantidad de claraboyas:</label
          ><input
            type="text"
            class="form-control"
            [(ngModel)]="mod.cantidadClaraboya"
            name="cantidadClaraboya"
            required
            [class.is-invalid]="formSubmitted && !mod.cantidadClaraboya"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Marca:</label
          ><input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaClaraboya"
            name="marcaClaraboya"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaClaraboya"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Modelo:</label
          ><input
            type="text"
            class="form-control"
            [(ngModel)]="mod.modeloClaraboya"
            name="modeloClaraboya"
            required
            [class.is-invalid]="formSubmitted && !mod.modeloClaraboya"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Descripción:</label
          ><textarea
            class="form-control"
            rows="2"
            [(ngModel)]="mod.descripcionClaraboya"
            name="descripcionClaraboya"
            required
            [class.is-invalid]="formSubmitted && !mod.descripcionClaraboya"
          ></textarea>
        </div>
        <div class="mb-2">
          <label class="form-label">Contraseña de homologación:</label
          ><input
            type="text"
            class="form-control"
            [(ngModel)]="mod.homologacionClaraboya"
            name="homologacionClaraboya"
            required
            [class.is-invalid]="formSubmitted && !mod.homologacionClaraboya"
          />
        </div>
      </div>
      }
      <!-- VENTANA -->
      @if (mod.nombre === 'VENTANA' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Ventana</h3>
        <div class="mb-2">
          <label class="form-label">Cantidad de ventanas:</label
          ><input
            type="text"
            class="form-control"
            [(ngModel)]="mod.cantidadVentanas"
            name="cantidadVentanas"
            required
            [class.is-invalid]="formSubmitted && !mod.cantidadVentanas"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Descripción:</label
          ><textarea
            class="form-control"
            rows="2"
            [(ngModel)]="mod.descripcionVentana"
            name="descripcionVentana"
            required
            [class.is-invalid]="formSubmitted && !mod.descripcionVentana"
          ></textarea>
        </div>
        <div class="mb-2">
          <label class="form-label">Marca:</label
          ><input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaVentana"
            name="marcaVentana"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaVentana"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Modelo:</label
          ><input
            type="text"
            class="form-control"
            [(ngModel)]="mod.modeloVentana"
            name="modeloVentana"
            required
            [class.is-invalid]="formSubmitted && !mod.modeloVentana"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Dimensiones:</label
          ><input
            type="text"
            class="form-control"
            [(ngModel)]="mod.dimensionesVentana"
            name="dimensionesVentana"
            required
            [class.is-invalid]="formSubmitted && !mod.dimensionesVentana"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Contraseña de homologación:</label
          ><input
            type="text"
            class="form-control"
            [(ngModel)]="mod.homologacionVentana"
            name="homologacionVentana"
            required
            [class.is-invalid]="formSubmitted && !mod.homologacionVentana"
          />
        </div>
      </div>
      }
      <!-- DEPÓSITO DE AGUA SUCIA -->
      @if (mod.nombre === 'DEPÓSITO DE AGUA SUCIA' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Depósito de Agua Sucia</h3>
        <div class="mb-2">
          <label class="form-label">Cantidad de litros:</label
          ><input
            type="number"
            min="0"
            min="0"
            class="form-control"
            [(ngModel)]="mod.litrosAguaSucia"
            name="litrosAguaSucia"
            required
            [class.is-invalid]="formSubmitted && !mod.litrosAguaSucia"
          />
        </div>
        <div class="mb-2">
          <label class="form-label"
            >Selecciona valor de la metrica de los tornillos:</label
          >
          <select
            class="form-select"
            [(ngModel)]="mod.metrica"
            name="metrica{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.metrica == null"
          >
            <option [value]="null" disabled selected>Seleccione...</option>
            @for (num of metricasTornillos; track num) {
            <option [value]="num">
              {{ num }}
            </option>
            }
          </select>
        </div>
        <label class="form-label">Nº de tornillos:</label>
        <input
          type="number"
          min="0"
          class="form-control"
          [(ngModel)]="mod.nTornillos"
          name="nTornillos"
          required
          [class.is-invalid]="formSubmitted && !mod.nTornillos"
        />
      </div>
      }
      <!-- DEPÓSITO DE AGUA LIMPIA -->
      @if (mod.nombre === 'DEPÓSITO DE AGUA LIMPIA' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Depósito de Agua Limpia</h3>
        <div class="mb-2">
          <label class="form-label">Cantidad de litros:</label
          ><input
            type="number"
            min="0"
            min="0"
            class="form-control"
            [(ngModel)]="mod.litrosAguaLimpia"
            name="litrosAguaLimpia"
            required
            [class.is-invalid]="formSubmitted && !mod.litrosAguaLimpia"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Medidas:</label
          ><input
            type="text"
            class="form-control"
            [(ngModel)]="mod.medidasAguaLimpia"
            name="medidasAguaLimpia"
            required
            [class.is-invalid]="formSubmitted && !mod.medidasAguaLimpia"
          />
        </div>
        <div class="mb-2">
          <label class="form-label"
            >Selecciona valor de la metrica de los tornillos:</label
          >
          <select
            class="form-select"
            [(ngModel)]="mod.metrica"
            name="metrica{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.metrica == null"
          >
            <option [value]="null" disabled selected>Seleccione...</option>
            @for (num of metricasTornillos; track num) {
            <option [value]="num">
              {{ num }}
            </option>
            }
          </select>
        </div>
        <label class="form-label">Nº de tornillos:</label>
        <input
          type="number"
          min="0"
          class="form-control"
          [(ngModel)]="mod.nTornillos"
          name="nTornillos"
          required
          [class.is-invalid]="formSubmitted && !mod.nTornillos"
        />
      </div>
      }
      <!-- BOMBA DE AGUA -->
      @if (mod.nombre === 'BOMBA DE AGUA' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Bomba de Agua</h3>
        <div class="mb-2">
          <label class="form-label">Marca:</label
          ><input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaBombaAgua"
            name="marcaBombaAgua"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaBombaAgua"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Modelo:</label
          ><input
            type="text"
            class="form-control"
            [(ngModel)]="mod.modeloBombaAgua"
            name="modeloBombaAgua"
            required
            [class.is-invalid]="formSubmitted && !mod.modeloBombaAgua"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Ubicación:</label
          ><input
            type="text"
            class="form-control"
            [(ngModel)]="mod.ubicacionBombaAgua"
            name="ubicacionBombaAgua"
            required
            [class.is-invalid]="formSubmitted && !mod.ubicacionBombaAgua"
          />
        </div>
        <div class="mb-2">
          <label class="form-label"
            >Selecciona valor de la metrica de los tornillos:</label
          >
          <select
            class="form-select"
            [(ngModel)]="mod.metrica"
            name="metrica{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.metrica == null"
          >
            <option [value]="null" disabled selected>Seleccione...</option>
            @for (num of metricasTornillos; track num) {
            <option [value]="num">
              {{ num }}
            </option>
            }
          </select>
        </div>
        <label class="form-label">Nº de tornillos:</label>
        <input
          type="number"
          min="0"
          class="form-control"
          [(ngModel)]="mod.nTornillos"
          name="nTornillos"
          required
          [class.is-invalid]="formSubmitted && !mod.nTornillos"
        />
      </div>
      }
      <!-- REGISTRO DE LLENADO DE AGUA -->
      @if (mod.nombre === 'REGISTRO DE LLENADO DE AGUA' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Registro de llenado de agua</h3>
        <div class="mb-2">
          <label class="form-label">Ubicación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.ubicacionRegistroAgua"
            name="ubicacionRegistroAgua{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.ubicacionRegistroAgua"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Tamaño:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.tamanoRegistroAgua"
            name="tamanoRegistroAgua{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.tamanoRegistroAgua"
          />
        </div>
      </div>
      }
      <!-- TOMA EXTERIOR 230V -->
      @if (mod.nombre === 'TOMA EXTERIOR 230V' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Toma exterior 230V</h3>
        <div class="mb-2">
          <label class="form-label">Voltaje:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.voltajeTomaExterior"
            name="voltajeTomaExterior{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.voltajeTomaExterior"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Ubicación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.ubicacionTomaExterior"
            name="ubicacionTomaExterior{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.ubicacionTomaExterior"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Medidas:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.medidasTomaExterior"
            name="medidasTomaExterior{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.medidasTomaExterior"
          />
        </div>
      </div>
      }
      <!-- DUCHA EXTERIOR -->
      @if (mod.nombre === 'DUCHA EXTERIOR' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Ducha exterior</h3>
        <div class="mb-2">
          <label class="form-label">Ubicación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.ubicacionDuchaExterior"
            name="ubicacionDuchaExterior{{ i }}"
            required
            [class.is-invalid]="formSubmitted && !mod.ubicacionDuchaExterior"
          />
        </div>
        <div class="mb-2">
          <label class="form-label"
            >Selecciona valor de la metrica de los tornillos:</label
          >
          <select
            class="form-select"
            [(ngModel)]="mod.metrica"
            name="metrica{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.metrica == null"
          >
            <option [value]="null" disabled selected>Seleccione...</option>
            @for (num of metricasTornillos; track num) {
            <option [value]="num">
              {{ num }}
            </option>
            }
          </select>
        </div>
        <label class="form-label">Nº de tornillos:</label>
        <input
          type="number"
          min="0"
          class="form-control"
          [(ngModel)]="mod.nTornillos"
          name="nTornillos"
          required
          [class.is-invalid]="formSubmitted && !mod.nTornillos"
        />
      </div>
      }
      <!-- INSTALACIÓN ELÉCTRICA -->
      @if (mod.nombre === 'INSTALACIÓN ELÉCTRICA' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Instalación Eléctrica</h3>
        <!-- Placa solar -->
        <h4>Placa Solar</h4>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaPlacaSolar"
            name="marcaPlacaSolar"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaPlacaSolar"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Modelo:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.modeloPlacaSolar"
            name="modeloPlacaSolar"
            required
            [class.is-invalid]="formSubmitted && !mod.modeloPlacaSolar"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Potencia:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.potenciaPlacaSolar"
            name="potenciaPlacaSolar"
            required
            [class.is-invalid]="formSubmitted && !mod.potenciaPlacaSolar"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Dimensiones (mm):</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.dimensionesPlacaSolar"
            name="dimensionesPlacaSolar"
            required
            [class.is-invalid]="formSubmitted && !mod.dimensionesPlacaSolar"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Ubicación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.ubicacionPlacaSolar"
            name="ubicacionPlacaSolar"
            required
            [class.is-invalid]="formSubmitted && !mod.ubicacionPlacaSolar"
          />
        </div>
        <!-- Baterías auxiliares -->
        <h4>Baterías Auxiliares</h4>
        <div class="mb-2">
          <label class="form-label">Cantidad:</label>
          <input
            type="number"
            min="0"
            class="form-control"
            [(ngModel)]="mod.cantidadBaterias"
            name="cantidadBaterias"
            required
            [class.is-invalid]="formSubmitted && !mod.cantidadBaterias"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Potencia:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.potenciaBaterias"
            name="potenciaBaterias"
            required
            [class.is-invalid]="formSubmitted && !mod.potenciaBaterias"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Ubicación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.ubicacionBaterias"
            name="ubicacionBaterias"
            required
            [class.is-invalid]="formSubmitted && !mod.ubicacionBaterias"
          />
        </div>
        <!-- Inversor -->
        <h4>Inversor</h4>
        <div class="mb-2">
          <label class="form-label">Potencia:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.potenciaInversor"
            name="potenciaInversor"
            required
            [class.is-invalid]="formSubmitted && !mod.potenciaInversor"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaInversor"
            name="marcaInversor"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaInversor"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Ubicación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.ubicacionInversor"
            name="ubicacionInversor"
            required
            [class.is-invalid]="formSubmitted && !mod.ubicacionInversor"
          />
        </div>
        <!-- Controlador de carga -->
        <h4>Controlador de Carga</h4>
        <div class="mb-2">
          <label class="form-label">Modelo:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.modeloControlador"
            name="modeloControlador"
            required
            [class.is-invalid]="formSubmitted && !mod.modeloControlador"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaControlador"
            name="marcaControlador"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaControlador"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Ubicación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.ubicacionControlador"
            name="ubicacionControlador"
            required
            [class.is-invalid]="formSubmitted && !mod.ubicacionControlador"
          />
        </div>
        <h4>Instalaciones Secundarias</h4>
        <div class="mb-2">
          <label class="form-label"
            >Describa otras instalaciones (una por línea):</label
          >
          <textarea
            class="form-control"
            rows="5"
            [(ngModel)]="mod.instalacionesSecundarias"
            name="instalacionesSecundarias{{ i }}"
          ></textarea>
        </div>
      </div>
      }
      <!-- TOLDO -->
      @if (mod.nombre === 'TOLDO' && mod.seleccionado) {
      <div class="mb-4">
        <h3>Toldo</h3>
        <div class="mb-2">
          <label class="form-label">Marca:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.marcaToldo"
            name="marcaToldo"
            required
            [class.is-invalid]="formSubmitted && !mod.marcaToldo"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Medidas:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.medidasToldo"
            name="medidasToldo"
            required
            [class.is-invalid]="formSubmitted && !mod.medidasToldo"
          />
        </div>
        <div class="mb-2">
          <label class="form-label">Ubicación:</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="mod.ubicacionToldo"
            name="ubicacionToldo"
            required
            [class.is-invalid]="formSubmitted && !mod.ubicacionToldo"
          />
        </div>
        <div class="mb-2">
          <label class="form-label"
            >Selecciona valor de la metrica de los tornillos:</label
          >
          <select
            class="form-select"
            [(ngModel)]="mod.metrica"
            name="metrica{{ i }}"
            required
            [class.is-invalid]="formSubmitted && mod.metrica == null"
          >
            <option [value]="null" disabled selected>Seleccione...</option>
            @for (num of metricasTornillos; track num) {
            <option [value]="num">
              {{ num }}
            </option>
            }
          </select>
        </div>
        <label class="form-label">Nº de tornillos:</label>
        <input
          type="number"
          min="0"
          class="form-control"
          [(ngModel)]="mod.nTornillos"
          name="nTornillos"
          required
          [class.is-invalid]="formSubmitted && !mod.nTornillos"
        />
      </div>
      }
      <!-- Añadir más bloques según las modificaciones necesarias -->
    </div>
    }

    <div class="d-flex justify-content-between mt-3">
      <button
        type="button"
        class="btn btn-outline-secondary"
        (click)="onVolver()"
      >
        ← Volver
      </button>
      <button type="submit" class="btn btn-primary">Continuar →</button>
    </div>
  </form>
</div>
